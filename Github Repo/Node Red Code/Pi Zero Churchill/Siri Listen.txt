[{"id":"ae4c9b1b.adb1e8","type":"debug","z":"b1aa82e3.b401f","name":"","active":false,"console":"false","complete":"false","x":363.6666564941406,"y":147.0000228881836,"wires":[]},{"id":"a4aec681.3c59b8","type":"link out","z":"b1aa82e3.b401f","name":"","links":["5218ba8d.aa04a4"],"x":893.3333415985107,"y":225.77777481079102,"wires":[]},{"id":"feee504c.66139","type":"link out","z":"b1aa82e3.b401f","name":"Siri Listen data","links":[],"x":620,"y":360,"wires":[]},{"id":"ce963e80.07b2d","type":"function","z":"b1aa82e3.b401f","name":"Siri Said","func":"var newWord = msg.payload.toString();\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n\nnewMsg = \"Siri said\";\nnode.send ({payload:newMsg});\n//sleep (250);\n//newMsg = newWord;\n//node.send ({payload:newMsg});\n\nreturn null;","outputs":1,"noerr":0,"x":682.1111335754395,"y":220.11111068725586,"wires":[["a4aec681.3c59b8"]]},{"id":"ae2a8025.ac145","type":"function","z":"b1aa82e3.b401f","name":"Say Current Temperature","func":"//var myDelay = setInterval(myTimer, 1000);\n\nvar newWord = msg.payload;\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n\nnewMsg = \"Siri said\";\nnode.send ({payload:newMsg});\nsleep(500);\n\nnewMsg = newWord;\nnode.send ({payload:newMsg});\n\n//sleep(500);\n\n//newMsg =\"Degrees\";\n//node.send ({payload:newMsg});\n\n\n//msg.payload = msg.payload.toString();\n//msg = \"Current Temperature is\";\n//+msg+\"Degrees\"';\n//msg = 'Current Temperature is\"'+msg+'Degrees\"'\n//newMsg = 'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"'+msg+',au\") and u=\"c\"';\n\n//msg = \"Relay Three Off\";\n//node.send ({payload:newMsg});\nreturn null;","outputs":1,"noerr":0,"x":242.22223663330078,"y":279.99998474121094,"wires":[[]]},{"id":"3a083f00.0e1a52","type":"link out","z":"b1aa82e3.b401f","name":"Receive from Siri","links":["ec89faf6.10cfb8","fa9978de.3e4978","22a0441.2db44bc","a0cf29db.2ca328","b56b6c66.25161","5a352fa4.44a15","5c97da9a.89a2e4"],"x":674.5318040847778,"y":97.82539558410645,"wires":[]},{"id":"f595b5ed.b935b8","type":"tcp in","z":"b1aa82e3.b401f","name":"from Siri:4056","server":"server","host":"","port":"4056","datamode":"single","datatype":"buffer","newline":"","topic":"","base64":false,"x":131.2916717529297,"y":68.05556011199951,"wires":[["ae4c9b1b.adb1e8","a6be890a.273a68","feee504c.66139"]]},{"id":"a6be890a.273a68","type":"function","z":"b1aa82e3.b401f","name":"Convert payload to String","func":"msg.payload = msg.payload.toString();\nreturn msg;","outputs":1,"noerr":0,"x":374.1905212402344,"y":68.16666507720947,"wires":[["3a083f00.0e1a52","ce963e80.07b2d"]]}]