[{"id":"65e9d9b0.1f5238","type":"comment","z":"2665eab9.b291e6","name":"Video You Tube link","info":"<iframe width=\"854\" height=\"480\" src=\"https://www.youtube.com/embed/5I3xyc--n5A\" frameborder=\"0\" allowfullscreen></iframe>\nrtsp://admin:@192.168.1.20/user=admin_password=tlJwpbo6_channel=1_stream=0.sdp\n<iframe width=\"320\" height=\"240\" src=\"http://192.168.1.10:80/GetData.cgi\" frameborder=\"0\" allowfullscreen></iframe>\n<iframe width=\"320\" height=\"240\" src=\"rtsp://admin:@192.168.1.20/user=admin_password=tlJwpbo6_channel=1_stream=0.sdp\" frameborder=\"0\" allowfullscreen></iframe>\nhttp://chrishayes31:31aussie@192.168.1.10/snapshot.jpg?user=admin&pwd=\nhttp://chrishayes31:31aussie@192.168.1.10/videostream.cgi?rate=0&user=chrishayes31&pwd=31aussie","x":660,"y":700,"wires":[]},{"id":"f5b246a1.e05048","type":"debug","z":"2665eab9.b291e6","name":"","active":false,"console":"false","complete":"false","x":770,"y":40,"wires":[]},{"id":"eac4b1c1.a71fd","type":"http request","z":"2665eab9.b291e6","name":"Take Snapshot 1","method":"GET","ret":"bin","url":"http://120.146.192.70:8089/Jpeg/CamImg.jpg","tls":"","x":958.1110572814941,"y":101.44444608688354,"wires":[["4d9270d0.7111c"]]},{"id":"f2561f66.b06fa","type":"inject","z":"2665eab9.b291e6","name":"","topic":"from actual IP camera mark","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":270.2539482116699,"y":152.15874576568604,"wires":[["6216ef64.a582b"]]},{"id":"634c112f.e2117","type":"delay","z":"2665eab9.b291e6","name":"","pauseType":"delay","timeout":"200","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":871.087329864502,"y":466.39681577682495,"wires":[["b9d6f094.3c002"]]},{"id":"4c916481.ec3f5c","type":"function","z":"2665eab9.b291e6","name":"Extract AMX Data","func":"var msg = msg.payload;\nif (msg == \"DOOR BELL PRESSED\")\n    {\n    var newMsg = 1;\n    node.send ({payload:[newMsg.payload]});\n    }\n\nreturn [null];","outputs":"1","noerr":0,"x":350,"y":20,"wires":[["3edda1f8.0d491e","85358688.e675d8"]]},{"id":"e60c7fda.42bbf","type":"ui_template","z":"2665eab9.b291e6","group":"f4b24ec9.a2107","name":"Front Door Camera","order":1,"width":"0","height":"0","format":"<iframe width=\"320\" height=\"240\" src=\"http://120.146.192.70:8089/GetData.cgi\" frameborder=\"0\" allowfullscreen></iframe>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":850,"y":720,"wires":[[]]},{"id":"847e6c41.b238d","type":"e-mail","z":"2665eab9.b291e6","server":"smtp.gmail.com","port":"465","secure":true,"name":"cjshayes@gmail.com","dname":"Email - siricjshayes@gmail.com","x":1289.7776794433594,"y":408.58732557296753,"wires":[]},{"id":"3aeba1df.d6fa5e","type":"http request","z":"2665eab9.b291e6","name":"Take Snapshot 2","method":"GET","ret":"bin","url":"http://120.146.192.70:8089/Jpeg/CamImg.jpg","tls":"","x":957.1110572814941,"y":140.44444608688354,"wires":[["e3157ab1.5be638"]]},{"id":"16df4524.7c907b","type":"delay","z":"2665eab9.b291e6","name":"Shot 2 - 2 sec","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":760,"y":140,"wires":[["3aeba1df.d6fa5e"]]},{"id":"96d7e1e2.eb8f8","type":"http request","z":"2665eab9.b291e6","name":"Take Snapshot 3","method":"GET","ret":"bin","url":"http://120.146.192.70:8089/Jpeg/CamImg.jpg","tls":"","x":960.1110572814941,"y":179.44444608688354,"wires":[["7cfa3360.585acc"]]},{"id":"85358688.e675d8","type":"trigger","z":"2665eab9.b291e6","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"50","extend":false,"units":"ms","reset":"","name":"","x":550,"y":20,"wires":[["f5b246a1.e05048","4c92a32e.a8fa5c","16df4524.7c907b","65591339.98603c","7586d1d1.aeb1e"]]},{"id":"39bb016c.ecaa7e","type":"function","z":"2665eab9.b291e6","name":"Attach Pictures","func":"var newmsg = {};\nnewmsg.filename = \"\";\nvar today = new Date();\nvar date = today.getDate() + '-' + (today.getMonth()+1) + '-' + today.getFullYear();\nvar time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\nvar dateTime = date +' ' + time;\n//newmsg.filename = \"/home/pi/Documents/Chris_Programs/Door_Bell_Images/Door_Camera1.jpg\";\n\nnewmsg.attachments = [\n    { \n        filename: \"DoorCamera1.jpg\",\n        content: msg.payload[0]\n    },\n    {\n        filename: \"DoorCamera2.jpg\",\n        content: msg.payload[1]\n    }, \n    {\n        filename: \"DoorCamera3.jpg\",\n        content: msg.payload[2]\n    }\n    ];\nnewmsg.topic = \"Front Door Bell pressed - \" + dateTime;\nnewmsg.payload = \"Front door camera\";\nnewmsg.description = \"Want this to appear in body of email\";\nreturn newmsg;","outputs":1,"noerr":0,"x":1027.3968887329102,"y":350.5872302055359,"wires":[["7dbed7bd.2b8d18","847e6c41.b238d"]]},{"id":"e3157ab1.5be638","type":"file","z":"2665eab9.b291e6","name":"Save Snapshot 2 to File","filename":"/home/pi/Documents/Chris_Programs/Door_Bell_Images/Door_Camera2.jpg","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1186.361183166504,"y":139.44445037841797,"wires":[[]]},{"id":"8fffdd35.49a7c","type":"link in","z":"2665eab9.b291e6","name":"Front Door Bell Camera","links":["294c21df.288d3e"],"x":219.0000171661377,"y":59.000006675720215,"wires":[["4c916481.ec3f5c"]]},{"id":"3edda1f8.0d491e","type":"debug","z":"2665eab9.b291e6","name":"","active":false,"console":"false","complete":"false","x":1030,"y":20,"wires":[]},{"id":"f95338a8.eb4368","type":"file in","z":"2665eab9.b291e6","name":"","filename":"/home/pi/Documents/Chris_Programs/Door_Bell_Images/Door_Camera1.jpg","format":"","x":427.5158462524414,"y":351.20641803741455,"wires":[["b9d6f094.3c002"]]},{"id":"65591339.98603c","type":"delay","z":"2665eab9.b291e6","name":"Shot 2 -4 sec","pauseType":"delay","timeout":"4","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":757.1110572814941,"y":179.44444608688354,"wires":[["96d7e1e2.eb8f8"]]},{"id":"9bfcb4a0.a8c708","type":"ui_template","z":"2665eab9.b291e6","group":"13545ed4.742a01","name":"vid","order":1,"width":"","height":"","format":"<iframe width=\"854\" height=\"480\" src=\"http://192.168.1.10:554/videostream.cgi?usr=nodered&pwd=nodered\" frameborder=\"0\" allowfullscreen></iframe>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":1090,"y":740,"wires":[[]]},{"id":"82efbc84.2f618","type":"file in","z":"2665eab9.b291e6","name":"","filename":"/home/pi/Documents/Chris_Programs/Door_Bell_Images/Door_Camera2.jpg","format":"","x":430.42049407958984,"y":410.0635132789612,"wires":[["f588e583.109fe8"]]},{"id":"6216ef64.a582b","type":"ui_button","z":"2665eab9.b291e6","name":"Take Images","group":"8645909c.b6d6f","order":0,"width":0,"height":0,"passthru":true,"label":"Take Shot","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"str","topic":"","x":447.8571548461914,"y":152.2857313156128,"wires":[["4c92a32e.a8fa5c","16df4524.7c907b","65591339.98603c","7586d1d1.aeb1e"]]},{"id":"ade2c53b.c98938","type":"ui_template","z":"2665eab9.b291e6","group":"13545ed4.742a01","name":"Office Camera","order":1,"width":"0","height":"0","format":"<iframe width=\"320\" height=\"240\" src=\"http://chrishayes31:31aussie@192.168.1.10/videostream.cgi?rate=0&user=adminchannel=1_stream=0.sdp\" frameborder=\"0\" allowfullscreen></iframe>\n<iframe width=\"320\" height=\"240\" src=\"rtsp://admin:@192.168.1.10/user=admin_password=tlJwpbo6_channel=1_stream=0.sdp\" frameborder=\"0\" allowfullscreen></iframe>\nhttp://chrishayes31:31aussie@192.168.1.10/snapshot.jpg?user=chrishayes31&pwd=31aussie\nhttp://chrishayes31:31aussie@192.168.1.10/videostream.cgi?rate=0&user=chrishayes31&pwd=31aussie","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":840,"y":760,"wires":[[]]},{"id":"7cfa3360.585acc","type":"file","z":"2665eab9.b291e6","name":"Save Snapshot 3 to File","filename":"/home/pi/Documents/Chris_Programs/Door_Bell_Images/Door_Camera3.jpg","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1187.361183166504,"y":178.44445037841797,"wires":[[]]},{"id":"4c92a32e.a8fa5c","type":"delay","z":"2665eab9.b291e6","name":"Shot 1 - 250ms","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":760,"y":100,"wires":[["eac4b1c1.a71fd"]]},{"id":"7586d1d1.aeb1e","type":"delay","z":"2665eab9.b291e6","name":"Send Images","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":758.1110572814941,"y":217.44444608688354,"wires":[["f95338a8.eb4368","82efbc84.2f618","461cdb02.ca2ca4"]]},{"id":"b9d6f094.3c002","type":"join","z":"2665eab9.b291e6","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","timeout":"","count":"3","x":853.9206657409668,"y":350.3015933036804,"wires":[["39bb016c.ecaa7e"]]},{"id":"4d9270d0.7111c","type":"file","z":"2665eab9.b291e6","name":"Save Snapshot 1 to File","filename":"/home/pi/Documents/Chris_Programs/Door_Bell_Images/Door_Camera1.jpg","appendNewline":false,"createDir":true,"overwriteFile":"true","x":1187.861183166504,"y":102.44445037841797,"wires":[[]]},{"id":"461cdb02.ca2ca4","type":"file in","z":"2665eab9.b291e6","name":"","filename":"/home/pi/Documents/Chris_Programs/Door_Bell_Images/Door_Camera3.jpg","format":"","x":428.03961181640625,"y":466.06351804733276,"wires":[["634c112f.e2117"]]},{"id":"f588e583.109fe8","type":"delay","z":"2665eab9.b291e6","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":870.4206047058105,"y":409.4444546699524,"wires":[["b9d6f094.3c002"]]},{"id":"7dbed7bd.2b8d18","type":"debug","z":"2665eab9.b291e6","name":"","active":false,"console":"false","complete":"true","x":1209.1586418151855,"y":351.301598072052,"wires":[]},{"id":"f4b24ec9.a2107","type":"ui_group","z":"","name":"Front Door","tab":"49f755f.c9c1bac","disp":true,"width":"7"},{"id":"13545ed4.742a01","type":"ui_group","z":"","name":"Office Camera","tab":"49f755f.c9c1bac","disp":true,"width":"7"},{"id":"8645909c.b6d6f","type":"ui_group","z":"","name":"Snapshot","tab":"49f755f.c9c1bac","disp":true,"width":"2"},{"id":"49f755f.c9c1bac","type":"ui_tab","z":"","name":"Cameras","icon":"dashboard","order":16}]