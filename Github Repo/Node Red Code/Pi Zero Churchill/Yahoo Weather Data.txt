[{"id":"90bc7dd1.e239d","type":"function","z":"df28a1a0.d9409","name":"Rise and Fall","func":"var msg = msg.payload;\nvar newMsg;\nif (msg == \"0\")\n    {\n    newMsg = \"Steady\";\n    node.send ({payload:newMsg});   \n    }\nif (msg == \"1\")\n    {\n    newMsg = \"Rising\";\n    node.send ({payload:newMsg});   \n    }\nif (msg == \"2\")\n    {\n    newMsg = \"Falling\";\n    node.send ({payload:newMsg});   \n    }\nreturn null;","outputs":1,"noerr":0,"x":1220,"y":660,"wires":[["d4a18002.f75eb"]]},{"id":"c9d00be7.7e5378","type":"function","z":"df28a1a0.d9409","name":"Select City","func":"msg = msg.payload;\nvar newMsg;\n//and u='c'\"\n//select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"jiangmen,cn\") and u=\"c\"\n\nnewMsg = 'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"'+msg+',au\") and u=\"c\"';\nnode.send ({payload:[newMsg]});\nreturn null;","outputs":1,"noerr":0,"x":530,"y":260,"wires":[["b38ab35.ee3b75"]]},{"id":"e4d09618.4543d8","type":"ui_text","z":"df28a1a0.d9409","group":"f1328f48.fe77","order":6,"width":"0","height":"0","name":"Current Condition","label":"Condition : ","format":"{{msg.payload}}","layout":"row-left","x":1430,"y":820,"wires":[]},{"id":"82093c55.7c474","type":"change","z":"df28a1a0.d9409","name":"Location Data","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.location","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":1040,"wires":[["87719d4a.e6e7e"]]},{"id":"3f62d170.4bf2be","type":"debug","z":"df28a1a0.d9409","name":"","active":false,"console":"false","complete":"false","x":760,"y":960,"wires":[]},{"id":"6f3476fa.878e98","type":"change","z":"df28a1a0.d9409","name":"Atmosphere Data","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.atmosphere","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":1120,"wires":[["1e0fac1b.f67a04"]]},{"id":"a14531c.cd39ad","type":"debug","z":"df28a1a0.d9409","name":"","active":false,"console":"false","complete":"true","x":1390,"y":260,"wires":[]},{"id":"5b0156a5.537a08","type":"debug","z":"df28a1a0.d9409","name":"","active":false,"console":"false","complete":"false","x":1630,"y":1040,"wires":[]},{"id":"9ba52569.126128","type":"inject","z":"df28a1a0.d9409","name":"Dandenong","topic":"","payload":"dandenong","payloadType":"str","repeat":"","crontab":"","once":false,"x":110,"y":260,"wires":[["3f7c722a.82fe3e"]]},{"id":"dcb6c9e8.35e738","type":"function","z":"df28a1a0.d9409","name":"Look for CITY in String","func":"var msg = msg.payload;\nvar newMsg = msg.replace('CITY ','');\n//console.log(ret);   //prints: 123\nnode.send ({payload:[newMsg]});\nreturn null;","outputs":1,"noerr":0,"x":360,"y":1100,"wires":[[]]},{"id":"5002e079.34ea2","type":"file","z":"df28a1a0.d9409","name":"Capture File","filename":"Dandenong Weather Capture.txt","appendNewline":false,"createDir":false,"overwriteFile":"true","x":1150,"y":260,"wires":[[]]},{"id":"1e0fac1b.f67a04","type":"function","z":"df28a1a0.d9409","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1120,"wires":[["de14b06b.a5423"]]},{"id":"53b3655f.2a33fc","type":"function","z":"df28a1a0.d9409","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1200,"wires":[["8757ef56.91559"]]},{"id":"f6baa114.331af","type":"function","z":"df28a1a0.d9409","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1160,"wires":[["e14e3009.ae8af"]]},{"id":"d9f6c0a9.e1a1d","type":"change","z":"df28a1a0.d9409","name":"Speed","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.wind.speed","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":540,"wires":[["91e48734.918738"]]},{"id":"5c6a3fa2.b196a","type":"ui_button","z":"df28a1a0.d9409","name":"Cairns","group":"598385ec.c4b5fc","order":0,"width":"2","height":"1","passthru":true,"label":"Cairns","color":"","bgcolor":"","icon":"","payload":"carins","payloadType":"str","topic":"","x":290,"y":540,"wires":[["c9d00be7.7e5378"]]},{"id":"62d5b816.bfbcb8","type":"ui_gauge","z":"df28a1a0.d9409","name":"Wind Speed","group":"b8ae3fa5.9288d","order":3,"width":"3","height":"2","gtype":"gage","title":"Wind Speed","label":"kph","format":"{{value}}","min":0,"max":"120","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1410,"y":540,"wires":[]},{"id":"203894bb.1ea34c","type":"change","z":"df28a1a0.d9409","name":"Sunset","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.astronomy.sunset","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":780,"wires":[["8daf97d.b526d68"]]},{"id":"b38ab35.ee3b75","type":"change","z":"df28a1a0.d9409","name":"Convert Query","rules":[{"pt":"msg","to":"payload","p":"query","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":260,"wires":[["b49de93.0db4218"]]},{"id":"54471c2c.17c114","type":"link out","z":"df28a1a0.d9409","name":"Yahoo Weather Forecast Data","links":["2503d41d.69341c","43a44587.6027ac","4b48d678.6cc188","79063054.28d7a"],"x":1275,"y":380,"wires":[]},{"id":"4368bc9e.e2ccd4","type":"function","z":"df28a1a0.d9409","name":"","func":"var outputMsgs = [];\nvar words = {}; //msg.payload.split(\":\");\nfor (var w in words)\n    {\n    outputMsgs.push({payload:words[w]});\n    //node.send ({payload:[outputMsgs]})\n    }\nreturn null;\n//return [ outputMsgs ];","outputs":1,"noerr":0,"x":570,"y":960,"wires":[["3f62d170.4bf2be"]]},{"id":"f32d8aa5.cd93b8","type":"link out","z":"df28a1a0.d9409","name":"From Yahoo Weather","links":["5218ba8d.aa04a4"],"x":1195,"y":980,"wires":[]},{"id":"8757ef56.91559","type":"delay","z":"df28a1a0.d9409","name":"","pauseType":"delay","timeout":"1000","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1200,"wires":[["ebd702c.85c9a","5b0156a5.537a08"]]},{"id":"996a7c41.6da72","type":"change","z":"df28a1a0.d9409","name":"Visibilty","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.atmosphere.visibility","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":700,"wires":[["4dddef17.7adb"]]},{"id":"a878ea54.47cd48","type":"ui_button","z":"df28a1a0.d9409","name":"Perth","group":"598385ec.c4b5fc","order":0,"width":"2","height":"1","passthru":true,"label":"Perth","color":"","bgcolor":"","icon":"","payload":"perth","payloadType":"str","topic":"","x":290,"y":420,"wires":[["c9d00be7.7e5378"]]},{"id":"e14e3009.ae8af","type":"delay","z":"df28a1a0.d9409","name":"","pauseType":"delay","timeout":"750","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1160,"wires":[["ebd702c.85c9a","5b0156a5.537a08"]]},{"id":"775192e5.04bd8c","type":"ui_button","z":"df28a1a0.d9409","name":"Sydney","group":"598385ec.c4b5fc","order":0,"width":"2","height":"1","passthru":true,"label":"Sydney","color":"","bgcolor":"","icon":"","payload":"sydney","payloadType":"str","topic":"","x":300,"y":300,"wires":[["c9d00be7.7e5378"]]},{"id":"3f7c722a.82fe3e","type":"ui_button","z":"df28a1a0.d9409","name":"Dandenong","group":"598385ec.c4b5fc","order":0,"width":"2","height":"1","passthru":true,"label":"Dandenong","color":"","bgcolor":"","icon":"","payload":"dandenong","payloadType":"str","topic":"","x":310,"y":260,"wires":[["c9d00be7.7e5378"]]},{"id":"85c7d913.93bf58","type":"debug","z":"df28a1a0.d9409","name":"","active":false,"console":"false","complete":"false","x":530,"y":720,"wires":[]},{"id":"4dddef17.7adb","type":"ui_text","z":"df28a1a0.d9409","group":"f1328f48.fe77","order":5,"width":"0","height":"0","name":"Visibility","label":"Visibility : ","format":"{{msg.payload}}kms","layout":"row-left","x":1400,"y":700,"wires":[]},{"id":"1e8ff5ad.a7f66a","type":"ui_text","z":"df28a1a0.d9409","group":"f1328f48.fe77","order":1,"width":"0","height":"0","name":"Pressure","label":"Pressure : ","format":"{{msg.payload.toFixed(0)}} - kpa","layout":"row-left","x":1400,"y":620,"wires":[]},{"id":"270fb18a.a6502e","type":"ui_gauge","z":"df28a1a0.d9409","name":"Current Temp","group":"b8ae3fa5.9288d","order":1,"width":"3","height":"2","gtype":"gage","title":"Current Temp","label":"degrees","format":"{{value}}","min":"-10","max":"50","colors":["#0080c0","#00b500","#ca3838"],"seg1":"16","seg2":"23","x":1421.6666946411133,"y":858.3333740234375,"wires":[]},{"id":"97e9535e.350c1","type":"debug","z":"df28a1a0.d9409","name":"","active":false,"console":"false","complete":"payload","x":730,"y":880,"wires":[]},{"id":"c0182fdc.47e6a","type":"inject","z":"df28a1a0.d9409","name":"Ciarns","topic":"","payload":"cairns","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":540,"wires":[["5c6a3fa2.b196a"]]},{"id":"ed84d7cb.043ff8","type":"ui_text","z":"df28a1a0.d9409","group":"f1328f48.fe77","order":4,"width":"0","height":"0","name":"Sunrise","label":"Sunrise : ","format":"{{msg.payload}}","layout":"row-left","x":1400,"y":740,"wires":[]},{"id":"1866114a.8c567f","type":"change","z":"df28a1a0.d9409","name":"Current Temp","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.item.condition.temp","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":860,"wires":[["270fb18a.a6502e","e8042328.32179"]]},{"id":"5770356c.bc5d3c","type":"function","z":"df28a1a0.d9409","name":"Convert to Miilbars","func":"var msg = msg.payload;\nvar newMsg = msg * 0.02953;\nnode.send ({payload:newMsg});   \nreturn null;","outputs":1,"noerr":0,"x":1230,"y":620,"wires":[["1e8ff5ad.a7f66a"]]},{"id":"13fc85c4.6a314a","type":"change","z":"df28a1a0.d9409","name":"Astronomy Data","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.astronomy","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":1160,"wires":[["f6baa114.331af"]]},{"id":"b9cf16b0.2d5528","type":"json","z":"df28a1a0.d9409","name":"","pretty":false,"x":790,"y":380,"wires":[["5d587164.459e","dc2bd2fb.547d1","d9f6c0a9.e1a1d","57956d3b.b26744","af6367ad.6317b8","d13faf03.a2e1","996a7c41.6da72","58ce4cd9.11e754","203894bb.1ea34c","75f34c8c.883154","1866114a.8c567f","eb67a0cb.0aaa5","e1f14fd0.3a6db","54471c2c.17c114","d282a546.d2f4c8","6f3476fa.878e98","9ea0d870.0347a8","13fc85c4.6a314a","82093c55.7c474","b11bd25.4cb663"]]},{"id":"5110f278.346d7c","type":"inject","z":"df28a1a0.d9409","name":"Sydney","topic":"","payload":"sydney","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":300,"wires":[["775192e5.04bd8c"]]},{"id":"e697f6b7.d77358","type":"inject","z":"df28a1a0.d9409","name":"Adelaide","topic":"","payload":"adelaide","payloadType":"str","repeat":"","crontab":"","once":false,"x":100,"y":380,"wires":[["4172e076.3d783"]]},{"id":"3573502d.17e71","type":"function","z":"df28a1a0.d9409","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1240,"wires":[["d9c16de1.26d8f"]]},{"id":"d282a546.d2f4c8","type":"change","z":"df28a1a0.d9409","name":"Wind Data","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.wind","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":1080,"wires":[["c396fd85.c52b5"]]},{"id":"c396fd85.c52b5","type":"function","z":"df28a1a0.d9409","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1080,"wires":[["47acfac1.7b6d34"]]},{"id":"75868264.9444ac","type":"ui_gauge","z":"df28a1a0.d9409","name":"Wind Direction","group":"b8ae3fa5.9288d","order":2,"width":"3","height":"2","gtype":"compass","title":"Wind Direction","label":"Degrees","format":"{{value}}","min":"1","max":"360","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1420,"y":500,"wires":[]},{"id":"de14b06b.a5423","type":"delay","z":"df28a1a0.d9409","name":"","pauseType":"delay","timeout":"600","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1120,"wires":[["ebd702c.85c9a","5b0156a5.537a08"]]},{"id":"a5d70a64.675b88","type":"function","z":"df28a1a0.d9409","name":"","func":"var outputMsgs = [];\nvar words = msg.payload.split(\",\");\nvar test = 0;\nfunction sleep(milliseconds) \n    {\n    var start = new Date().getTime();\n    for (var i = 0; i < 1e7; i++) \n        {\n        if ((new Date().getTime() - start) > milliseconds)\n            {\n            break;\n            }\n        }\n    }\n    \nfor (var w in words)\n    {\n    outputMsgs.push({payload:words[w]});\n    //node.send ({payload:[outputMsgs]})\n    }\n//return null;\n\n\nvar array_length = outputMsgs.length;\n//node.send ({payload:array_length}); //works\n\nfor (i = 0; i < array_length; i++) // look for key words\n    { \n    test = 0\n    test = outputMsgs.search(\"title\");\n    if (test >0)\n        {\n        var cTest = outputMsgs[i].valueOf();\n        //node.send ({payload:'title=' + cTest.payload + '\\r\\n'});\n        }\n    }\nfor (i = 0; i < array_length; i++) // look for key words\n    {\n    test = 0\n    test = outputMsgs.search(\"speed\");    \n    if (test>0)\n        {\n        var cTitle = outputMsgs[i].valueOf();\n        //node.send ({payload:'speed=' + cTest.payload + '\\r\\n'});\n        }\n    }\nfor (i = 0; i < array_length; i++) // look for key words\n    { \n    test = 0\n    test = outputMsgs.search(\"chill\");    \n    if (test>0)\n        {\n        var ctest = outputMsgs[i].valueOf();\n        //node.send ({payload:'chill=' + cTest.payload + '\\r\\n'});\n        }\n    }\n\n//for (i = 0; i < outputMsgs.length; i++) \n   // {\n    //var test = outputMsgs[i];\n    //if (test)\n    //}\nnode.send ({payload:cTest});\nreturn null;\n//return [ outputMsgs ];","outputs":1,"noerr":0,"x":330,"y":900,"wires":[[]]},{"id":"e1f14fd0.3a6db","type":"change","z":"df28a1a0.d9409","name":"Location and Current Temp","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.location.city","p":"payload","t":"set","tot":"msg"},{"pt":"msg","to":"msg.payload.query.results.channel.item.condition.temp","p":"topic","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":940,"wires":[[]]},{"id":"58ce4cd9.11e754","type":"change","z":"df28a1a0.d9409","name":"Sunrise","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.astronomy.sunrise","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":740,"wires":[["ed84d7cb.043ff8"]]},{"id":"75f34c8c.883154","type":"change","z":"df28a1a0.d9409","name":"Current Condition","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.item.condition.text","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":820,"wires":[["e4d09618.4543d8"]]},{"id":"7f342139.ecd9d","type":"debug","z":"df28a1a0.d9409","name":"","active":false,"console":"false","complete":"false","x":674.0714111328125,"y":115.75002002716064,"wires":[]},{"id":"ebd702c.85c9a","type":"link out","z":"df28a1a0.d9409","name":"Received Data from Yahoo","links":["af0bd716.1ba418"],"x":1535,"y":380,"wires":[]},{"id":"de9a46b9.92b9b8","type":"debug","z":"df28a1a0.d9409","name":"","active":true,"console":"false","complete":"false","x":1320,"y":140,"wires":[]},{"id":"9ea0d870.0347a8","type":"change","z":"df28a1a0.d9409","name":"Current Condition","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.item","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":1200,"wires":[["53b3655f.2a33fc"]]},{"id":"1a3b16a8.f6aeb9","type":"ui_button","z":"df28a1a0.d9409","name":"Brisbane","group":"598385ec.c4b5fc","order":0,"width":"2","height":"1","passthru":true,"label":"Brisbane","color":"","bgcolor":"","icon":"","payload":"brisbane","payloadType":"str","topic":"","x":300,"y":460,"wires":[["c9d00be7.7e5378"]]},{"id":"47acfac1.7b6d34","type":"delay","z":"df28a1a0.d9409","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1080,"wires":[["5b0156a5.537a08","ebd702c.85c9a"]]},{"id":"b49de93.0db4218","type":"http request","z":"df28a1a0.d9409","name":"","method":"GET","ret":"txt","url":"https://query.yahooapis.com/v1/public/yql?q={{{query}}}&format=json","tls":"","x":910,"y":260,"wires":[["5002e079.34ea2","b9cf16b0.2d5528","de9a46b9.92b9b8"]]},{"id":"e299251e.4329d8","type":"inject","z":"df28a1a0.d9409","name":"Darwin","topic":"","payload":"darwin","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":500,"wires":[["c31001a3.37cad"]]},{"id":"7fddc5f8.b5ee0c","type":"function","z":"df28a1a0.d9409","name":"Send to AMX weather data","func":"var newmsg = {};\nvar Wind_Chill = msg.payload.query.results.channel.wind.chill\n\nvar msg = msg.payload;\n\n//var parsed = JSON.parse(msg);\n\n//var array = JSON.parse(\"[\" + msg + \"]\");\n\nvar array = [msg];\n//newmsg = msg.split(\",\");\n\nreturn Wind_Chill;\n\n\n\n\n\n\n\n\n\n//var arr = []; // create blank array\n\n//for(var x in msg)   // loop and put strngs and elements into the array \n//    {\n//    arr.push(msg[x]);\n//    node.send ({payload:[arr]});\n//    }\n//node.send ({payload:[arr]});\n//return [arr];\n\n\n\n//var inputstring = msg.topic;\n//var channels = Object.keys(msg.payload);\n//var oldpayload = msg.payload;\n//var foundChannel = \"\";\n\n\n//for (var i=0; i<channels.length; i++) {\n//    if (inputstring.indexOf(channels[i]) !=-1) {\n//        foundChannel = channels[i];\n//        var channelNumber = oldpayload[channels[i]];\n//        var result = \"**channel \" + channelNumber;\n//        break;\n//    }\n//}\n\n//newmsg.payload = result;\n//return result;","outputs":1,"noerr":0,"x":1150,"y":320,"wires":[["a14531c.cd39ad"]]},{"id":"2b78d6a9.26104a","type":"link in","z":"df28a1a0.d9409","name":"From AMX - Yahoo Weather request","links":["edff28e9.7fff18"],"x":328.9920582771301,"y":116.34127521514893,"wires":[["7f342139.ecd9d","c9d00be7.7e5378"]]},{"id":"d4a18002.f75eb","type":"ui_text","z":"df28a1a0.d9409","group":"f1328f48.fe77","order":2,"width":"0","height":"0","name":"Pressure Rise / Fall","label":"Current Pressure : ","format":"{{msg.payload}}","layout":"row-left","x":1430,"y":660,"wires":[]},{"id":"d13faf03.a2e1","type":"change","z":"df28a1a0.d9409","name":"Rising","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.atmosphere.rising","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":660,"wires":[["90bc7dd1.e239d"]]},{"id":"29e99764.68c428","type":"inject","z":"df28a1a0.d9409","name":"Canberra","topic":"","payload":"canberra","payloadType":"str","repeat":"","crontab":"","once":false,"x":100,"y":340,"wires":[["f3b53478.cf3ff8"]]},{"id":"e8042328.32179","type":"link out","z":"df28a1a0.d9409","name":"From Weather Station","links":["d52f19fa.2ad1b8"],"x":1175,"y":880,"wires":[]},{"id":"91e48734.918738","type":"function","z":"df28a1a0.d9409","name":"","func":"//var msg = Math.round(msg.payload.query.results.channel.wind.speed);\nvar msg = Math.round(msg.payload);\nnode.send ({payload:msg});\nreturn null;","outputs":1,"noerr":0,"x":1170,"y":540,"wires":[["62d5b816.bfbcb8"]]},{"id":"eb67a0cb.0aaa5","type":"function","z":"df28a1a0.d9409","name":"Say Current Temperature","func":"var newLocation = msg.payload.query.results.channel.location.city;\nvar newTemp = msg.payload.query.results.channel.item.condition.temp;\n\nvar newMsg = {};\nnewMsg = \"Current Temperature is  \" + newTemp + \" Degrees in \" + newLocation;\nnode.send ({payload:newMsg});\nreturn null;\n\n\n\n//msg.payload.query.results.channel.item.condition.temp\n//msg.payload.query.results.channel.location.city","outputs":1,"noerr":0,"x":1010,"y":980,"wires":[["f32d8aa5.cd93b8"]]},{"id":"5d587164.459e","type":"change","z":"df28a1a0.d9409","name":"Wind Chill","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.wind.chill","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":460,"wires":[["a62eec06.e1036"]]},{"id":"57956d3b.b26744","type":"change","z":"df28a1a0.d9409","name":"Humidity","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.atmosphere.humidity","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":580,"wires":[["b577b550.806378"]]},{"id":"fb6faa7b.8363d8","type":"file in","z":"df28a1a0.d9409","name":"Yahoo Weather capture","filename":"Dandenong Weather Capture.txt","format":"utf8","x":350,"y":580,"wires":[["85c7d913.93bf58","b9cf16b0.2d5528","70315645.fe9b88"]]},{"id":"c31001a3.37cad","type":"ui_button","z":"df28a1a0.d9409","name":"Darwin","group":"598385ec.c4b5fc","order":0,"width":"2","height":"1","passthru":true,"label":"Darwin","color":"","bgcolor":"","icon":"","payload":"darwin","payloadType":"str","topic":"","x":300,"y":500,"wires":[["c9d00be7.7e5378"]]},{"id":"b577b550.806378","type":"ui_gauge","z":"df28a1a0.d9409","name":"Humidity","group":"b8ae3fa5.9288d","order":4,"width":"3","height":"2","gtype":"gage","title":"Humidity","label":"Degrees","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1400,"y":580,"wires":[]},{"id":"9e17e056.827a7","type":"function","z":"df28a1a0.d9409","name":"Lookup Words Files","func":"var newmsg = {};\nvar inputstring = msg.topic;\nvar channels = Object.keys(msg.payload);\nvar oldpayload = msg.payload;\nvar foundChannel = \"\";\n\n\nfor (var i=0; i<channels.length; i++) {\n    if (inputstring.indexOf(channels[i]) !=-1) {\n        foundChannel = channels[i];\n        var channelNumber = oldpayload[channels[i]];\n        var result = \"**channel \" + channelNumber;\n        break;\n    }\n}\n\nnewmsg.payload = result;\n\n/*\nnewmsg.payload = {\n    inputstring: inputstring,\n    channels: channels,\n    oldpayload: oldpayload,\n    foundChannel: foundChannel,\n    result: result\n};\n*/\nreturn newmsg;","outputs":1,"noerr":0,"x":320,"y":1020,"wires":[[]]},{"id":"a62eec06.e1036","type":"ui_gauge","z":"df28a1a0.d9409","name":"Wind Chill","group":"b8ae3fa5.9288d","order":5,"width":"3","height":"2","gtype":"gage","title":"Wind Chill","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1400,"y":460,"wires":[]},{"id":"f3b53478.cf3ff8","type":"ui_button","z":"df28a1a0.d9409","name":"Canberra","group":"598385ec.c4b5fc","order":0,"width":"2","height":"1","passthru":true,"label":"Canberra","color":"","bgcolor":"","icon":"","payload":"Canberra","payloadType":"str","topic":"","x":300,"y":340,"wires":[["c9d00be7.7e5378"]]},{"id":"70315645.fe9b88","type":"function","z":"df28a1a0.d9409","name":"","func":"var outputMsgs = [];\nvar words = msg.payload.split(\",\");\nvar test = 0;\nfunction sleep(milliseconds) \n    {\n    var start = new Date().getTime();\n    for (var i = 0; i < 1e7; i++) \n        {\n        if ((new Date().getTime() - start) > milliseconds)\n            {\n            break;\n            }\n        }\n    }\n    \nfor (var w in words)\n    {\n    outputMsgs.push({payload:words[w]});\n    //node.send ({payload:[outputMsgs[w]]});\n    //sleep(1000);\n    }\n\n//node.send ({payload:cTest});\n//return [ outputMsgs ];\nreturn null;","outputs":1,"noerr":0,"x":470,"y":840,"wires":[["97e9535e.350c1","4368bc9e.e2ccd4"]]},{"id":"da0f37ca.0866b8","type":"inject","z":"df28a1a0.d9409","name":"Perth","topic":"","payload":"perth","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":420,"wires":[["a878ea54.47cd48"]]},{"id":"b11bd25.4cb663","type":"change","z":"df28a1a0.d9409","name":"Forecast Data","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.item.forecast","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":1240,"wires":[["3573502d.17e71"]]},{"id":"d9c16de1.26d8f","type":"delay","z":"df28a1a0.d9409","name":"","pauseType":"delay","timeout":"1250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1240,"wires":[["ebd702c.85c9a","5b0156a5.537a08"]]},{"id":"4172e076.3d783","type":"ui_button","z":"df28a1a0.d9409","name":"Adelaide","group":"598385ec.c4b5fc","order":0,"width":"2","height":"1","passthru":true,"label":"Adelaide","color":"","bgcolor":"","icon":"","payload":"adelaide","payloadType":"str","topic":"","x":300,"y":380,"wires":[["c9d00be7.7e5378"]]},{"id":"87719d4a.e6e7e","type":"function","z":"df28a1a0.d9409","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1040,"wires":[["ebd702c.85c9a","5b0156a5.537a08"]]},{"id":"af6367ad.6317b8","type":"change","z":"df28a1a0.d9409","name":"Pressure","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.atmosphere.pressure","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":620,"wires":[["5770356c.bc5d3c"]]},{"id":"2f045d93.5e6582","type":"inject","z":"df28a1a0.d9409","name":"Brisbane","topic":"","payload":"brisbane","payloadType":"str","repeat":"","crontab":"","once":false,"x":100,"y":460,"wires":[["1a3b16a8.f6aeb9"]]},{"id":"50f9f75.12b3008","type":"inject","z":"df28a1a0.d9409","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":100,"y":580,"wires":[["fb6faa7b.8363d8"]]},{"id":"8daf97d.b526d68","type":"ui_text","z":"df28a1a0.d9409","group":"f1328f48.fe77","order":3,"width":"0","height":"0","name":"Sunset","label":"Sunset : ","format":"{{msg.payload}}","layout":"row-left","x":1400,"y":780,"wires":[]},{"id":"dc2bd2fb.547d1","type":"change","z":"df28a1a0.d9409","name":"Direction","rules":[{"pt":"msg","to":"msg.payload.query.results.channel.wind.direction","p":"payload","t":"set","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":500,"wires":[["75868264.9444ac"]]},{"id":"f1328f48.fe77","type":"ui_group","z":"","name":"Yahoo Weather Conditions","tab":"20924a97.0b2eb6","order":3,"disp":true,"width":"5"},{"id":"598385ec.c4b5fc","type":"ui_group","z":"","name":"City","tab":"20924a97.0b2eb6","order":1,"disp":true,"width":"2"},{"id":"b8ae3fa5.9288d","type":"ui_group","z":"","name":"Yahoo Weather","tab":"20924a97.0b2eb6","order":2,"disp":true,"width":"3"},{"id":"20924a97.0b2eb6","type":"ui_tab","z":"","name":"Yahoo Weather","icon":"dashboard","order":1}]