[{"id":"e5dbbd1d.24147","type":"inject","z":"c887880a.b02cc8","name":"Grab CAM2","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":280,"wires":[["3a61dbf2.8ae624"]]},{"id":"e55c3446.c380e8","type":"exec","z":"c887880a.b02cc8","command":"/usr/bin/fswebcam -d /dev/video0 ","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":780,"y":160,"wires":[["f453ba44.fde768"],["758d6d8f.3cd6c4"],["ae919fa7.53bdc"]]},{"id":"a61c4224.318f4","type":"inject","z":"c887880a.b02cc8","name":"Grab CAM1","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":110,"y":160,"wires":[["50e095cd.80fc6c"]]},{"id":"f453ba44.fde768","type":"debug","z":"c887880a.b02cc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1070,"y":120,"wires":[]},{"id":"758d6d8f.3cd6c4","type":"debug","z":"c887880a.b02cc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1070,"y":160,"wires":[]},{"id":"ae919fa7.53bdc","type":"debug","z":"c887880a.b02cc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1070,"y":200,"wires":[]},{"id":"50e095cd.80fc6c","type":"ui_button","z":"c887880a.b02cc8","name":"","group":"8e4450db.846128","order":2,"width":0,"height":0,"passthru":true,"label":"Refresh Entry Camera","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":340,"y":160,"wires":[["c1b7492b.54e2e8","f5899cc9.a66ac"]]},{"id":"5f9a5077.4c118","type":"ui_template","z":"c887880a.b02cc8","group":"ba411d10.1574f","name":"Camera 1","order":1,"width":0,"height":0,"format":"<div height=\"330\" style=\"height: 330px;\">\n<img style=\"width: 100%\">\n<!--<img ng-src=\"{{msg.payload}}\"/>-->\n<img src=\"{{msg.payload}}\"/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":880,"y":380,"wires":[["11d5f7ad.4a8378"]]},{"id":"69349522.2238cc","type":"exec","z":"c887880a.b02cc8","command":"/usr/bin/fswebcam -d /dev/video1","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":780,"y":280,"wires":[["7da8c54e.40696c"],["42b60741.88b098"],["5bd9f587.c064bc"]]},{"id":"3a61dbf2.8ae624","type":"ui_button","z":"c887880a.b02cc8","name":"","group":"ba411d10.1574f","order":2,"width":0,"height":0,"passthru":true,"label":"Refresh Exit Camera","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":340,"y":280,"wires":[["34a0e6d6.b5d64a","f5899cc9.a66ac"]]},{"id":"aa85fbdd.4dda68","type":"ui_template","z":"c887880a.b02cc8","group":"fbb208d4.1f9628","name":"Camera 1","order":0,"width":0,"height":0,"format":"<div height=\"210\" style=\"height: 210px;\">\n<img style=\"width: 100%\" ng-src=\"{{msg.payload}}\">\n<img src=\"/home/pi/Pictures/Security/Testing/grabCAM1.jpg\"/ width=\"200\"><br/>\n<a href=\"/home/pi/Pictures/Security/Testing/grabCAM1.jpg\" target=\"_blank\">Full screen</a>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":880,"y":540,"wires":[[]]},{"id":"11fc7d72.19bfe3","type":"ui_template","z":"c887880a.b02cc8","group":"fbb208d4.1f9628","name":"Camera 2","order":0,"width":0,"height":0,"format":"<div height=\"210\" style=\"height: 210px;\">\n<img style=\"width: 100%\">\n<img src=\"/grabCAM2.jpg\" alt=\"Exit Driveway Camera\">\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":880,"y":460,"wires":[[]]},{"id":"7da8c54e.40696c","type":"debug","z":"c887880a.b02cc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1070,"y":240,"wires":[]},{"id":"42b60741.88b098","type":"debug","z":"c887880a.b02cc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","x":1070,"y":280,"wires":[]},{"id":"5bd9f587.c064bc","type":"debug","z":"c887880a.b02cc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":1070,"y":320,"wires":[]},{"id":"19b892f1.5d972d","type":"ui_template","z":"c887880a.b02cc8","group":"be12b1fc.f2ab","name":"Camera 1","order":0,"width":0,"height":0,"format":"<iframe id=\"camframe\" \nsrc=\"https://webcamsydney.com/\" \nscrolling=\"no\" \nallowfullscreen=\"\" \nwmode=\"transparent\" \nonload=\"resetHeight('camframe')\" \nstyle=\"height: 200px;\" \nwidth=\"100%\" \nheight=\"850px\" \nframeborder=\"0\" \nalign=\"middle\"></iframe>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":880,"y":500,"wires":[[]]},{"id":"16336039.df25d","type":"inject","z":"c887880a.b02cc8","name":"Refresh","topic":"","payload":"1","payloadType":"num","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":90,"y":400,"wires":[["f5899cc9.a66ac"]]},{"id":"11d5f7ad.4a8378","type":"debug","z":"c887880a.b02cc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1050,"y":380,"wires":[]},{"id":"301c0f95.82dbf","type":"debug","z":"c887880a.b02cc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":1050,"y":420,"wires":[]},{"id":"ffef533f.13c23","type":"ui_template","z":"c887880a.b02cc8","group":"8e4450db.846128","name":"Camera 2","order":1,"width":0,"height":0,"format":"<div height=\"330\" style=\"height: 330px;\">\n<img style=\"width: 100%\">\n<!--<img ng-src=\"{{msg.payload}}\"/>-->\n<img src=\"{{msg.payload}}\"/>\n</div>","storeOutMessages":true,"fwdInMessages":true,"templateScope":"local","x":880,"y":420,"wires":[["301c0f95.82dbf"]]},{"id":"c1b7492b.54e2e8","type":"function","z":"c887880a.b02cc8","name":"timestamp","func":"msg.payload = global.get(\"Front_Cam\");\n/*\nif (msg.payload == 0)\n    {\n    global.set(\"Front_Cam\", 1);\n    msg.payload = \"/home/pi/Pictures/grabCAM1a.jpg\"\n    }\nelse    \n    {\n    global.set(\"Front_Cam\", 0);\n    msg.payload = \"/home/pi/Pictures/grabCAM1b.jpg\"\n    }\n*/\nmsg.payload = \"/home/pi/Pictures/grabCAM1.jpg\";\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":160,"wires":[["e55c3446.c380e8"]]},{"id":"34a0e6d6.b5d64a","type":"function","z":"c887880a.b02cc8","name":"timestamp","func":"msg.payload = global.get(\"Exit_Cam\");\n/*if (msg.payload == 0)\n    {\n    global.set(\"Exit_Cam\", 1);\n    msg.payload = \"/home/pi/Pictures/grabCAM2a.jpg\"\n    }\nelse    \n    {\n    global.set(\"Exit_Cam\", 0);\n    msg.payload = \"/home/pi/Pictures/grabCAM2b.jpg\"\n    }\nreturn msg;\n*/\nmsg.payload = \"/home/pi/Pictures/grabCAM2.jpg\";\nreturn msg;","outputs":1,"noerr":0,"x":550,"y":280,"wires":[["69349522.2238cc"]]},{"id":"595e9a29.646874","type":"function","z":"c887880a.b02cc8","name":"timestamp","func":"msg.payload = global.get(\"Front_Cam\");\n/*\nif (msg.payload === 0)\n    {\n    global.set(\"Front_Cam\", 1);\n    msg.payload = \"/grabCAM1b.jpg\"\n    }\nelse if(msg.payload == 1) \n    {\n    global.set(\"Front_Cam\", 0);\n    msg.payload = \"/grabCAM1a.jpg\"\n    }\n*/\n\nmsg.payload = \"/cam1.jpg?d=\" + new Date().getTime();\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":380,"wires":[["ffef533f.13c23"]]},{"id":"2d4c1107.2f061e","type":"function","z":"c887880a.b02cc8","name":"timestamp","func":"msg.payload = global.get(\"Exit_Cam\");\n//if (msg.payload == 0)\n//    {\n//    global.set(\"Exit_Cam\", 1);\n//    msg.payload = \"/grabCAM2b.jpg\"\n//    }\n//else  if(msg.payload == 1)  \n//    {\n//        global.set(\"Exit_Cam\", 0);\n//    msg.payload = \"/grabCAM2a.jpg\"\n //   }\n//return msg;\n\nmsg.payload = \"/cam2.jpg?d=\" + new Date().getTime();\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":420,"wires":[["5f9a5077.4c118"]]},{"id":"f5899cc9.a66ac","type":"ui_button","z":"c887880a.b02cc8","name":"Refresh","group":"5dda29c6.e8a8f8","order":0,"width":"0","height":"0","passthru":true,"label":"Refresh","color":"","bgcolor":"","icon":"","payload":"1","payloadType":"num","topic":"","x":280,"y":400,"wires":[["84967383.9b61c"]]},{"id":"84967383.9b61c","type":"delay","z":"c887880a.b02cc8","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":540,"y":400,"wires":[["595e9a29.646874","2d4c1107.2f061e"]]},{"id":"d8387656.2e3f98","type":"link in","z":"c887880a.b02cc8","name":"Camera Triggers","links":["b3d0b9c8.077168"],"x":215,"y":60,"wires":[["24c9b214.2b9d9e"]]},{"id":"24c9b214.2b9d9e","type":"function","z":"c887880a.b02cc8","name":"Capture on Call Button","func":"if (msg.payload == 1) \n    {\n    node.send({payload:1});\n    }\n//return msg;","outputs":1,"noerr":0,"x":200,"y":100,"wires":[["50e095cd.80fc6c","3a61dbf2.8ae624"]]},{"id":"8e4450db.846128","type":"ui_group","z":"","name":"Front Camera","tab":"a2bf996c.3e4038","order":4,"disp":true,"width":"7","collapse":false},{"id":"ba411d10.1574f","type":"ui_group","z":"","name":"Rear Camera","tab":"a2bf996c.3e4038","order":5,"disp":true,"width":"7","collapse":false},{"id":"fbb208d4.1f9628","type":"ui_group","z":"","name":"Colour Buttons","tab":"11213176.b6081f","disp":true,"width":"6"},{"id":"be12b1fc.f2ab","type":"ui_group","z":"","name":"Colour Buttons","tab":"a6ae4466.984d88","disp":true,"width":"6"},{"id":"5dda29c6.e8a8f8","type":"ui_group","z":"","name":"Refresh","tab":"17df55d1.cec66a","disp":true,"width":"2","collapse":false},{"id":"a2bf996c.3e4038","type":"ui_tab","z":"","name":"Front Gate Controller","icon":"dashboard","order":1},{"id":"11213176.b6081f","type":"ui_tab","z":"","name":"testing","icon":"dashboard","order":4},{"id":"a6ae4466.984d88","type":"ui_tab","z":"","name":"testing","icon":"dashboard","order":3},{"id":"17df55d1.cec66a","type":"ui_tab","z":"","name":"Cameras","icon":"dashboard"}]