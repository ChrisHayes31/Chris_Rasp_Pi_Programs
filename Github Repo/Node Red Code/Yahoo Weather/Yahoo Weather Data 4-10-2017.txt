[{"id":"9fa4704b.49144","type":"file","z":"ebc5c18e.f8da8","name":"Capture File","filename":"Dandenong Weather Capture.txt","appendNewline":false,"createDir":false,"overwriteFile":"true","x":1150,"y":260,"wires":[]},{"id":"2cad0292.9c932e","type":"change","z":"ebc5c18e.f8da8","name":"Convert Query","rules":[{"t":"set","p":"query","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":260,"wires":[["37f025db.c5763a"]]},{"id":"b179968b.dfabf8","type":"function","z":"ebc5c18e.f8da8","name":"Select City","func":"msg = msg.payload;\nvar newMsg;\n//and u='c'\"\n//select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"jiangmen,cn\") and u=\"c\"\n\nnewMsg = 'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"'+msg+',au\") and u=\"c\"';\nnode.send ({payload:[newMsg]});\nreturn null;","outputs":1,"noerr":0,"x":530,"y":260,"wires":[["2cad0292.9c932e"]]},{"id":"37f025db.c5763a","type":"http request","z":"ebc5c18e.f8da8","name":"","method":"GET","ret":"txt","url":"https://query.yahooapis.com/v1/public/yql?q={{{query}}}&format=json","tls":"","x":910,"y":260,"wires":[["9fa4704b.49144","eeb60265.1d92d","4f321f0c.c9693"]]},{"id":"e7970136.1496","type":"inject","z":"ebc5c18e.f8da8","name":"Dandenong","topic":"","payload":"dandenong","payloadType":"str","repeat":"","crontab":"","once":false,"x":110,"y":260,"wires":[["ef65fa41.c603a8"]]},{"id":"4b181737.bd7888","type":"inject","z":"ebc5c18e.f8da8","name":"Sydney","topic":"","payload":"sydney","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":300,"wires":[["815d3d15.2a89e"]]},{"id":"16fe33d6.4d21fc","type":"file in","z":"ebc5c18e.f8da8","name":"Yahoo Weather capture","filename":"Dandenong Weather Capture.txt","format":"utf8","x":350,"y":580,"wires":[["5e29b70c.34d768","eeb60265.1d92d","d98e063c.398848"]]},{"id":"1943d3a1.d7baec","type":"inject","z":"ebc5c18e.f8da8","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":100,"y":580,"wires":[["16fe33d6.4d21fc"]]},{"id":"2b5df3d0.896ebc","type":"change","z":"ebc5c18e.f8da8","name":"Wind Chill","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.wind.chill","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":460,"wires":[["b36205e.d0ab8f8"]]},{"id":"937fe8f7.489d68","type":"change","z":"ebc5c18e.f8da8","name":"Direction","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.wind.direction","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":500,"wires":[["efcec9d1.db46a8"]]},{"id":"18441362.4c9bfd","type":"change","z":"ebc5c18e.f8da8","name":"Speed","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.wind.speed","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":540,"wires":[["fd76b440.0857c8"]]},{"id":"efcec9d1.db46a8","type":"ui_gauge","z":"ebc5c18e.f8da8","name":"Wind Direction","group":"8f50d553.ae5a48","order":2,"width":"3","height":"2","gtype":"compass","title":"Wind Direction","label":"Degrees","format":"{{value}}","min":"1","max":"360","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1420,"y":500,"wires":[]},{"id":"b36205e.d0ab8f8","type":"ui_gauge","z":"ebc5c18e.f8da8","name":"Wind Chill","group":"8f50d553.ae5a48","order":5,"width":"3","height":"2","gtype":"gage","title":"Wind Chill","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1400,"y":460,"wires":[]},{"id":"fd76b440.0857c8","type":"ui_gauge","z":"ebc5c18e.f8da8","name":"Wind Speed","group":"8f50d553.ae5a48","order":3,"width":"3","height":"2","gtype":"gage","title":"Wind Speed","label":"kph","format":"{{value}}","min":0,"max":"120","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1410,"y":540,"wires":[]},{"id":"5b68e54b.77f40c","type":"change","z":"ebc5c18e.f8da8","name":"Humidity","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.atmosphere.humidity","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":580,"wires":[["3543eeaa.c61d62"]]},{"id":"82cb1e35.f0fa8","type":"change","z":"ebc5c18e.f8da8","name":"Pressure","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.atmosphere.pressure","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":620,"wires":[["4aa48138.cb38e"]]},{"id":"ed30e25.ae96b2","type":"change","z":"ebc5c18e.f8da8","name":"Rising","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.atmosphere.rising","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":660,"wires":[["b1b2ad12.0e339"]]},{"id":"3543eeaa.c61d62","type":"ui_gauge","z":"ebc5c18e.f8da8","name":"Humidity","group":"8f50d553.ae5a48","order":4,"width":"3","height":"2","gtype":"gage","title":"Humidity","label":"Degrees","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1400,"y":580,"wires":[]},{"id":"b1b2ad12.0e339","type":"function","z":"ebc5c18e.f8da8","name":"Rise and Fall","func":"var msg = msg.payload;\nvar newMsg;\nif (msg == \"0\")\n    {\n    newMsg = \"Steady\";\n    node.send ({payload:newMsg});   \n    }\nif (msg == \"1\")\n    {\n    newMsg = \"Rising\";\n    node.send ({payload:newMsg});   \n    }\nif (msg == \"2\")\n    {\n    newMsg = \"Falling\";\n    node.send ({payload:newMsg});   \n    }\nreturn null;","outputs":1,"noerr":0,"x":1220,"y":660,"wires":[["9f152632.03c578"]]},{"id":"9f152632.03c578","type":"ui_text","z":"ebc5c18e.f8da8","group":"1878c41f.3de73c","order":2,"width":"2","height":"1","name":"Pressure Rise / Fall","label":"Current Pressure","format":"{{msg.payload}}","layout":"col-center","x":1430,"y":660,"wires":[]},{"id":"1c6a2017.e9ced","type":"change","z":"ebc5c18e.f8da8","name":"Visibilty","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.atmosphere.visibility","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":700,"wires":[["40eeffcd.0ee6e"]]},{"id":"d1fc955b.7fb4a8","type":"change","z":"ebc5c18e.f8da8","name":"Sunrise","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.astronomy.sunrise","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":740,"wires":[["fa4eeef3.252ea"]]},{"id":"fa2c9677.623de8","type":"change","z":"ebc5c18e.f8da8","name":"Sunset","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.astronomy.sunset","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":950,"y":780,"wires":[["71955b8d.fd7e44"]]},{"id":"71955b8d.fd7e44","type":"ui_text","z":"ebc5c18e.f8da8","group":"1878c41f.3de73c","order":3,"width":"2","height":"1","name":"Sunset","label":"Sunset","format":"{{msg.payload}}","layout":"col-center","x":1390,"y":780,"wires":[]},{"id":"fa4eeef3.252ea","type":"ui_text","z":"ebc5c18e.f8da8","group":"1878c41f.3de73c","order":4,"width":"2","height":"1","name":"Sunrise","label":"Sunrise","format":"{{msg.payload}}","layout":"col-center","x":1400,"y":740,"wires":[]},{"id":"ed732947.b6c058","type":"change","z":"ebc5c18e.f8da8","name":"Current Temp","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.item.condition.temp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":860,"wires":[["e128ad9f.7c4bb","f42bc02a.fc8c4"]]},{"id":"e128ad9f.7c4bb","type":"ui_gauge","z":"ebc5c18e.f8da8","name":"Current Temp","group":"8f50d553.ae5a48","order":1,"width":"3","height":"2","gtype":"gage","title":"Current Temp","label":"degrees","format":"{{value}}","min":"-10","max":"50","colors":["#0080c0","#00b500","#ca3838"],"seg1":"16","seg2":"23","x":1421.6666946411133,"y":858.3333740234375,"wires":[]},{"id":"85ecad46.20032","type":"change","z":"ebc5c18e.f8da8","name":"Current Condition","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.item.condition.text","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":820,"wires":[["77d09251.92de7c"]]},{"id":"77d09251.92de7c","type":"ui_text","z":"ebc5c18e.f8da8","group":"1878c41f.3de73c","order":6,"width":"2","height":"1","name":"Current Condition","label":"Condition","format":"{{msg.payload}}","layout":"col-center","x":1430,"y":820,"wires":[]},{"id":"868a2a5.87b04d8","type":"link out","z":"ebc5c18e.f8da8","name":"Yahoo Weather Forecast Data","links":["bc94f285.9de95"],"x":1275,"y":380,"wires":[]},{"id":"ef65fa41.c603a8","type":"ui_button","z":"ebc5c18e.f8da8","name":"Dandenong","group":"dde9489.5597bb8","order":0,"width":"2","height":"1","passthru":true,"label":"Dandenong","color":"","bgcolor":"","icon":"","payload":"dandenong","payloadType":"str","topic":"","x":310,"y":260,"wires":[["b179968b.dfabf8"]]},{"id":"815d3d15.2a89e","type":"ui_button","z":"ebc5c18e.f8da8","name":"Sydney","group":"dde9489.5597bb8","order":0,"width":"2","height":"1","passthru":true,"label":"Sydney","color":"","bgcolor":"","icon":"","payload":"sydney","payloadType":"str","topic":"","x":300,"y":300,"wires":[["b179968b.dfabf8"]]},{"id":"773fcc3b.693fd4","type":"ui_button","z":"ebc5c18e.f8da8","name":"Canberra","group":"dde9489.5597bb8","order":0,"width":"2","height":"1","passthru":true,"label":"Canberra","color":"","bgcolor":"","icon":"","payload":"Canberra","payloadType":"str","topic":"","x":300,"y":340,"wires":[["b179968b.dfabf8"]]},{"id":"1e91c3d9.b79d9c","type":"ui_button","z":"ebc5c18e.f8da8","name":"Adelaide","group":"dde9489.5597bb8","order":0,"width":"2","height":"1","passthru":true,"label":"Adelaide","color":"","bgcolor":"","icon":"","payload":"adelaide","payloadType":"str","topic":"","x":300,"y":380,"wires":[["b179968b.dfabf8"]]},{"id":"e10c889c.49e7c8","type":"ui_button","z":"ebc5c18e.f8da8","name":"Perth","group":"dde9489.5597bb8","order":0,"width":"2","height":"1","passthru":true,"label":"Perth","color":"","bgcolor":"","icon":"","payload":"perth","payloadType":"str","topic":"","x":290,"y":420,"wires":[["b179968b.dfabf8"]]},{"id":"2a187ab4.8328b6","type":"ui_button","z":"ebc5c18e.f8da8","name":"Brisbane","group":"dde9489.5597bb8","order":0,"width":"2","height":"1","passthru":true,"label":"Brisbane","color":"","bgcolor":"","icon":"","payload":"brisbane","payloadType":"str","topic":"","x":300,"y":460,"wires":[["b179968b.dfabf8"]]},{"id":"cea176c9.1e88b8","type":"ui_button","z":"ebc5c18e.f8da8","name":"Darwin","group":"dde9489.5597bb8","order":0,"width":"2","height":"1","passthru":true,"label":"Darwin","color":"","bgcolor":"","icon":"","payload":"darwin","payloadType":"str","topic":"","x":300,"y":500,"wires":[["b179968b.dfabf8"]]},{"id":"3daead94.ddef02","type":"ui_button","z":"ebc5c18e.f8da8","name":"Cairns","group":"dde9489.5597bb8","order":0,"width":"2","height":"1","passthru":true,"label":"Cairns","color":"","bgcolor":"","icon":"","payload":"carins","payloadType":"str","topic":"","x":290,"y":540,"wires":[["b179968b.dfabf8"]]},{"id":"259b4590.baf45a","type":"inject","z":"ebc5c18e.f8da8","name":"Canberra","topic":"","payload":"canberra","payloadType":"str","repeat":"","crontab":"","once":false,"x":100,"y":340,"wires":[["773fcc3b.693fd4"]]},{"id":"51aab68c.06bfb8","type":"inject","z":"ebc5c18e.f8da8","name":"Adelaide","topic":"","payload":"adelaide","payloadType":"str","repeat":"","crontab":"","once":false,"x":100,"y":380,"wires":[["1e91c3d9.b79d9c"]]},{"id":"bc827f9b.6ff92","type":"inject","z":"ebc5c18e.f8da8","name":"Perth","topic":"","payload":"perth","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":420,"wires":[["e10c889c.49e7c8"]]},{"id":"eee9190f.390ae8","type":"inject","z":"ebc5c18e.f8da8","name":"Brisbane","topic":"","payload":"brisbane","payloadType":"str","repeat":"","crontab":"","once":false,"x":100,"y":460,"wires":[["2a187ab4.8328b6"]]},{"id":"7d2473b2.3134ec","type":"inject","z":"ebc5c18e.f8da8","name":"Darwin","topic":"","payload":"darwin","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":500,"wires":[["cea176c9.1e88b8"]]},{"id":"5f05f862.963ee8","type":"inject","z":"ebc5c18e.f8da8","name":"Ciarns","topic":"","payload":"cairns","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":540,"wires":[["3daead94.ddef02"]]},{"id":"40eeffcd.0ee6e","type":"ui_text","z":"ebc5c18e.f8da8","group":"1878c41f.3de73c","order":5,"width":"2","height":"1","name":"Visibility","label":"Visibility ","format":"{{msg.payload}}kms","layout":"col-center","x":1400,"y":700,"wires":[]},{"id":"4aa48138.cb38e","type":"function","z":"ebc5c18e.f8da8","name":"Convert to Miilbars","func":"var msg = msg.payload;\nvar newMsg = msg * 0.02953;\nnode.send ({payload:newMsg});   \nreturn null;","outputs":1,"noerr":0,"x":1230,"y":620,"wires":[["4154187a.e2a928"]]},{"id":"4154187a.e2a928","type":"ui_text","z":"ebc5c18e.f8da8","group":"1878c41f.3de73c","order":1,"width":"2","height":"1","name":"Pressure","label":"Pressure","format":"{{msg.payload.toFixed(0)}}kpa","layout":"col-center","x":1400,"y":620,"wires":[]},{"id":"ba8efaf5.584948","type":"link in","z":"ebc5c18e.f8da8","name":"From AMX - Yahoo Weather request","links":["a667b34e.46c8c"],"x":328.9920582771301,"y":116.34127521514893,"wires":[["f23bf6e5.498b88","b179968b.dfabf8"]]},{"id":"524b8291.075d4c","type":"link out","z":"ebc5c18e.f8da8","name":"Received Data from Yahoo","links":["1fc0b7ae.4631f8"],"x":1535,"y":380,"wires":[]},{"id":"f23bf6e5.498b88","type":"debug","z":"ebc5c18e.f8da8","name":"","active":false,"console":"false","complete":"false","x":674.0714111328125,"y":115.75002002716064,"wires":[]},{"id":"f42bc02a.fc8c4","type":"link out","z":"ebc5c18e.f8da8","name":"From Weather Station","links":["f908eae3.2d5da8"],"x":1175,"y":880,"wires":[]},{"id":"fad78816.2710e8","type":"function","z":"ebc5c18e.f8da8","name":"Say Current Temperature","func":"var newLocation = msg.payload.query.results.channel.location.city;\nvar newTemp = msg.payload.query.results.channel.item.condition.temp;\n\nvar newMsg = {};\nnewMsg = \"Current Temperature is  \" + newTemp + \" Degrees in \" + newLocation;\nnode.send ({payload:newMsg});\nreturn null;\n\n\n\n//msg.payload.query.results.channel.item.condition.temp\n//msg.payload.query.results.channel.location.city","outputs":1,"noerr":0,"x":1010,"y":980,"wires":[["65ae7fb5.2b154"]]},{"id":"65ae7fb5.2b154","type":"link out","z":"ebc5c18e.f8da8","name":"From Yahoo Weather","links":["172d30fd.a329cf"],"x":1195,"y":980,"wires":[]},{"id":"c319ce5e.13e8e","type":"change","z":"ebc5c18e.f8da8","name":"Location and Current Temp","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.location.city","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"msg.payload.query.results.channel.item.condition.temp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1020,"y":940,"wires":[[]]},{"id":"eeb60265.1d92d","type":"json","z":"ebc5c18e.f8da8","name":"","x":790,"y":380,"wires":[["2b5df3d0.896ebc","937fe8f7.489d68","18441362.4c9bfd","5b68e54b.77f40c","82cb1e35.f0fa8","ed30e25.ae96b2","1c6a2017.e9ced","d1fc955b.7fb4a8","fa2c9677.623de8","85ecad46.20032","ed732947.b6c058","fad78816.2710e8","c319ce5e.13e8e","868a2a5.87b04d8","efe8f92d.904fb8","aa0acf21.f082","d81504e0.a38cf8","3c5e2d5b.afa2b2","1a6fdd6f.72ee23","4681970b.24e8d8"]]},{"id":"a1d03bcb.0160d8","type":"function","z":"ebc5c18e.f8da8","name":"Send to AMX weather data","func":"var newmsg = {};\nvar Wind_Chill = msg.payload.query.results.channel.wind.chill\n\nvar msg = msg.payload;\n\n//var parsed = JSON.parse(msg);\n\n//var array = JSON.parse(\"[\" + msg + \"]\");\n\nvar array = [msg];\n//newmsg = msg.split(\",\");\n\nreturn Wind_Chill;\n\n\n\n\n\n\n\n\n\n//var arr = []; // create blank array\n\n//for(var x in msg)   // loop and put strngs and elements into the array \n//    {\n//    arr.push(msg[x]);\n//    node.send ({payload:[arr]});\n//    }\n//node.send ({payload:[arr]});\n//return [arr];\n\n\n\n//var inputstring = msg.topic;\n//var channels = Object.keys(msg.payload);\n//var oldpayload = msg.payload;\n//var foundChannel = \"\";\n\n\n//for (var i=0; i<channels.length; i++) {\n//    if (inputstring.indexOf(channels[i]) !=-1) {\n//        foundChannel = channels[i];\n//        var channelNumber = oldpayload[channels[i]];\n//        var result = \"**channel \" + channelNumber;\n//        break;\n//    }\n//}\n\n//newmsg.payload = result;\n//return result;","outputs":1,"noerr":0,"x":1150,"y":320,"wires":[["802b5578.2e5b88","524b8291.075d4c"]]},{"id":"802b5578.2e5b88","type":"debug","z":"ebc5c18e.f8da8","name":"","active":false,"console":"false","complete":"true","x":1390,"y":260,"wires":[]},{"id":"4f321f0c.c9693","type":"debug","z":"ebc5c18e.f8da8","name":"","active":true,"console":"false","complete":"false","x":1320,"y":140,"wires":[]},{"id":"2eb7a9ff.12fdd6","type":"function","z":"ebc5c18e.f8da8","name":"Look for CITY in String","func":"var msg = msg.payload;\nvar newMsg = msg.replace('CITY ','');\n//console.log(ret);   //prints: 123\nnode.send ({payload:[newMsg]});\nreturn null;","outputs":1,"noerr":0,"x":360,"y":1100,"wires":[[]]},{"id":"5e29b70c.34d768","type":"debug","z":"ebc5c18e.f8da8","name":"","active":false,"console":"false","complete":"false","x":530,"y":720,"wires":[]},{"id":"c6e08950.e46ac8","type":"debug","z":"ebc5c18e.f8da8","name":"","active":true,"console":"false","complete":"false","x":1630,"y":1040,"wires":[]},{"id":"8bb9a045.5036d","type":"function","z":"ebc5c18e.f8da8","name":"","func":"var outputMsgs = [];\nvar words = {}; //msg.payload.split(\":\");\nfor (var w in words)\n    {\n    outputMsgs.push({payload:words[w]});\n    //node.send ({payload:[outputMsgs]})\n    }\nreturn null;\n//return [ outputMsgs ];","outputs":1,"noerr":0,"x":570,"y":960,"wires":[["57d9a811.4af0f8"]]},{"id":"880ece7d.9e764","type":"debug","z":"ebc5c18e.f8da8","name":"","active":true,"console":"false","complete":"payload","x":730,"y":880,"wires":[]},{"id":"d98e063c.398848","type":"function","z":"ebc5c18e.f8da8","name":"","func":"var outputMsgs = [];\nvar words = msg.payload.split(\",\");\nvar test = 0;\nfunction sleep(milliseconds) \n    {\n    var start = new Date().getTime();\n    for (var i = 0; i < 1e7; i++) \n        {\n        if ((new Date().getTime() - start) > milliseconds)\n            {\n            break;\n            }\n        }\n    }\n    \nfor (var w in words)\n    {\n    outputMsgs.push({payload:words[w]});\n    //node.send ({payload:[outputMsgs[w]]});\n    //sleep(1000);\n    }\n\n//node.send ({payload:cTest});\n//return [ outputMsgs ];\nreturn null;","outputs":1,"noerr":0,"x":470,"y":840,"wires":[["880ece7d.9e764","8bb9a045.5036d"]]},{"id":"57d9a811.4af0f8","type":"debug","z":"ebc5c18e.f8da8","name":"","active":false,"console":"false","complete":"false","x":760,"y":960,"wires":[]},{"id":"8b774816.95d798","type":"function","z":"ebc5c18e.f8da8","name":"Lookup Words Files","func":"var newmsg = {};\nvar inputstring = msg.topic;\nvar channels = Object.keys(msg.payload);\nvar oldpayload = msg.payload;\nvar foundChannel = \"\";\n\n\nfor (var i=0; i<channels.length; i++) {\n    if (inputstring.indexOf(channels[i]) !=-1) {\n        foundChannel = channels[i];\n        var channelNumber = oldpayload[channels[i]];\n        var result = \"**channel \" + channelNumber;\n        break;\n    }\n}\n\nnewmsg.payload = result;\n\n/*\nnewmsg.payload = {\n    inputstring: inputstring,\n    channels: channels,\n    oldpayload: oldpayload,\n    foundChannel: foundChannel,\n    result: result\n};\n*/\nreturn newmsg;","outputs":1,"noerr":0,"x":320,"y":1020,"wires":[[]]},{"id":"d3eedebb.2aebe","type":"function","z":"ebc5c18e.f8da8","name":"","func":"var outputMsgs = [];\nvar words = msg.payload.split(\",\");\nvar test = 0;\nfunction sleep(milliseconds) \n    {\n    var start = new Date().getTime();\n    for (var i = 0; i < 1e7; i++) \n        {\n        if ((new Date().getTime() - start) > milliseconds)\n            {\n            break;\n            }\n        }\n    }\n    \nfor (var w in words)\n    {\n    outputMsgs.push({payload:words[w]});\n    //node.send ({payload:[outputMsgs]})\n    }\n//return null;\n\n\nvar array_length = outputMsgs.length;\n//node.send ({payload:array_length}); //works\n\nfor (i = 0; i < array_length; i++) // look for key words\n    { \n    test = 0\n    test = outputMsgs.search(\"title\");\n    if (test >0)\n        {\n        var cTest = outputMsgs[i].valueOf();\n        //node.send ({payload:'title=' + cTest.payload + '\\r\\n'});\n        }\n    }\nfor (i = 0; i < array_length; i++) // look for key words\n    {\n    test = 0\n    test = outputMsgs.search(\"speed\");    \n    if (test>0)\n        {\n        var cTitle = outputMsgs[i].valueOf();\n        //node.send ({payload:'speed=' + cTest.payload + '\\r\\n'});\n        }\n    }\nfor (i = 0; i < array_length; i++) // look for key words\n    { \n    test = 0\n    test = outputMsgs.search(\"chill\");    \n    if (test>0)\n        {\n        var ctest = outputMsgs[i].valueOf();\n        //node.send ({payload:'chill=' + cTest.payload + '\\r\\n'});\n        }\n    }\n\n//for (i = 0; i < outputMsgs.length; i++) \n   // {\n    //var test = outputMsgs[i];\n    //if (test)\n    //}\nnode.send ({payload:cTest});\nreturn null;\n//return [ outputMsgs ];","outputs":1,"noerr":0,"x":330,"y":900,"wires":[[]]},{"id":"efe8f92d.904fb8","type":"change","z":"ebc5c18e.f8da8","name":"Wind Data","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.wind","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":970,"y":1080,"wires":[["26a82fef.a9d2"]]},{"id":"26a82fef.a9d2","type":"function","z":"ebc5c18e.f8da8","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1080,"wires":[["a218b9de.764a28"]]},{"id":"aa0acf21.f082","type":"change","z":"ebc5c18e.f8da8","name":"Atmosphere Data","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.atmosphere","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":1120,"wires":[["e1f4d2e0.0abd"]]},{"id":"1a6fdd6f.72ee23","type":"change","z":"ebc5c18e.f8da8","name":"Location Data","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.location","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":1040,"wires":[["96873e9.8096dc"]]},{"id":"e1f4d2e0.0abd","type":"function","z":"ebc5c18e.f8da8","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1120,"wires":[["44b76f1f.a689a"]]},{"id":"4681970b.24e8d8","type":"change","z":"ebc5c18e.f8da8","name":"Forecast Data","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.item","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":1240,"wires":[["6db4e981.d74e68"]]},{"id":"d81504e0.a38cf8","type":"change","z":"ebc5c18e.f8da8","name":"Current Condition","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.item.condition","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":990,"y":1200,"wires":[[]]},{"id":"44b76f1f.a689a","type":"delay","z":"ebc5c18e.f8da8","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1120,"wires":[["524b8291.075d4c","c6e08950.e46ac8"]]},{"id":"aa59c480.a52688","type":"function","z":"ebc5c18e.f8da8","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1200,"wires":[["7412224a.b9603c"]]},{"id":"7412224a.b9603c","type":"delay","z":"ebc5c18e.f8da8","name":"","pauseType":"delay","timeout":"1000","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1200,"wires":[["524b8291.075d4c","c6e08950.e46ac8"]]},{"id":"3c5e2d5b.afa2b2","type":"change","z":"ebc5c18e.f8da8","name":"Astronomy Data","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.astronomy","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":980,"y":1160,"wires":[["9dda7c70.505d1"]]},{"id":"9dda7c70.505d1","type":"function","z":"ebc5c18e.f8da8","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1160,"wires":[["9ccf1892.9d1988"]]},{"id":"9ccf1892.9d1988","type":"delay","z":"ebc5c18e.f8da8","name":"","pauseType":"delay","timeout":"750","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1160,"wires":[["524b8291.075d4c","c6e08950.e46ac8"]]},{"id":"96873e9.8096dc","type":"function","z":"ebc5c18e.f8da8","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1040,"wires":[["524b8291.075d4c","c6e08950.e46ac8"]]},{"id":"a218b9de.764a28","type":"delay","z":"ebc5c18e.f8da8","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1080,"wires":[["c6e08950.e46ac8","524b8291.075d4c"]]},{"id":"6db4e981.d74e68","type":"function","z":"ebc5c18e.f8da8","name":"Wind Data good","func":"var newmsg = {};\nvar newword = {};\nvar outputMsg = JSON.stringify(msg.payload);\noutputMsg = outputMsg.split(',');\n//node.send ({payload:outputMsg});\nnewword = outputMsg;\nnode.send ({payload:newword.toString()});\n\n//var words = msg.payload.toString().split(',');\n//return outputMsg;\nreturn null;\n","outputs":1,"noerr":0,"x":1180,"y":1240,"wires":[["344a6765.a76c98"]]},{"id":"344a6765.a76c98","type":"delay","z":"ebc5c18e.f8da8","name":"","pauseType":"delay","timeout":"1250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1360,"y":1240,"wires":[["524b8291.075d4c","c6e08950.e46ac8"]]},{"id":"8f50d553.ae5a48","type":"ui_group","z":"","name":"Yahoo Weather","tab":"b248343b.94ccc8","order":2,"disp":true,"width":"3"},{"id":"1878c41f.3de73c","type":"ui_group","z":"","name":"Yahoo Weather Conditions","tab":"b248343b.94ccc8","order":3,"disp":true,"width":"4"},{"id":"dde9489.5597bb8","type":"ui_group","z":"","name":"City","tab":"b248343b.94ccc8","order":1,"disp":true,"width":"2"},{"id":"b248343b.94ccc8","type":"ui_tab","z":"","name":"Yahoo Weather","icon":"dashboard","order":1}]