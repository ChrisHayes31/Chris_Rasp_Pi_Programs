[{"id":"90ed0d3d.ee921","type":"tcp in","z":"213c9014.36922","name":"from Siri:4056","server":"server","host":"","port":"4056","datamode":"single","datatype":"buffer","newline":"","topic":"","base64":false,"x":131.2916717529297,"y":68.05556011199951,"wires":[["66c1c28c.b3687c","1efc380b.496ee8","6b8da4ec.9cf02c"]]},{"id":"66c1c28c.b3687c","type":"debug","z":"213c9014.36922","name":"","active":true,"console":"false","complete":"false","x":363.6666564941406,"y":147.0000228881836,"wires":[]},{"id":"5ba4435b.ef26fc","type":"link out","z":"213c9014.36922","name":"Receive from Siri","links":["492cfab0.a48a14","547cf1f1.f0e47","5859a161.aa4e1","83632d79.982c2","9d83d8dd.95e648","a8e294f9.7c3e98","c7b1063c.59be18"],"x":674.5318040847778,"y":97.82539558410645,"wires":[]},{"id":"1efc380b.496ee8","type":"function","z":"213c9014.36922","name":"Convert payload to String","func":"msg.payload = msg.payload.toString();\nreturn msg;","outputs":1,"noerr":0,"x":374.1905212402344,"y":68.16666507720947,"wires":[["5ba4435b.ef26fc","47ec4754.f49a28"]]},{"id":"313c1c7.b3697e4","type":"function","z":"213c9014.36922","name":"Say Current Temperature","func":"//var myDelay = setInterval(myTimer, 1000);\n\nvar newWord = msg.payload;\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n\nnewMsg = \"Siri said\";\nnode.send ({payload:newMsg});\nsleep(500);\n\nnewMsg = newWord;\nnode.send ({payload:newMsg});\n\n//sleep(500);\n\n//newMsg =\"Degrees\";\n//node.send ({payload:newMsg});\n\n\n//msg.payload = msg.payload.toString();\n//msg = \"Current Temperature is\";\n//+msg+\"Degrees\"';\n//msg = 'Current Temperature is\"'+msg+'Degrees\"'\n//newMsg = 'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"'+msg+',au\") and u=\"c\"';\n\n//msg = \"Relay Three Off\";\n//node.send ({payload:newMsg});\nreturn null;","outputs":1,"noerr":0,"x":242.22223663330078,"y":279.99998474121094,"wires":[[]]},{"id":"47ec4754.f49a28","type":"function","z":"213c9014.36922","name":"Siri Said","func":"var newWord = msg.payload.toString();\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n\nnewMsg = \"Siri said\";\nnode.send ({payload:newMsg});\n//sleep (250);\n//newMsg = newWord;\n//node.send ({payload:newMsg});\n\nreturn null;","outputs":1,"noerr":0,"x":682.1111335754395,"y":220.11111068725586,"wires":[["c3ea6055.a4a56"]]},{"id":"c3ea6055.a4a56","type":"link out","z":"213c9014.36922","name":"","links":["ec902402.46e358"],"x":893.3333415985107,"y":225.77777481079102,"wires":[]}]