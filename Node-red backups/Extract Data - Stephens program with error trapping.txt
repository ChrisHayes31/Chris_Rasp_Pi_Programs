[{"id":"cd131515.e5dfd8","type":"inject","z":"bcf4cc8f.ed877","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"*/5 0-23 * * *","once":false,"x":130,"y":160,"wires":[["451085d3.9728cc"]]},{"id":"451085d3.9728cc","type":"http request","z":"bcf4cc8f.ed877","name":"","method":"GET","ret":"txt","url":"http://192.168.1.125","tls":"","x":290,"y":160,"wires":[["d6a8234b.25ad2","e5a87921.5abda8"]]},{"id":"d6a8234b.25ad2","type":"csv","z":"bcf4cc8f.ed877","name":"","sep":",","hdrin":true,"hdrout":false,"multi":"mult","ret":"\\n","temp":"","x":450,"y":160,"wires":[["a3aa46da.93edc8","2b93f737.fd94f8"]]},{"id":"e5a87921.5abda8","type":"debug","z":"bcf4cc8f.ed877","name":"http:request_Message","active":false,"console":"false","complete":"payload","x":490,"y":240,"wires":[]},{"id":"a3aa46da.93edc8","type":"debug","z":"bcf4cc8f.ed877","name":"","active":false,"console":"false","complete":"payload","x":720,"y":160,"wires":[]},{"id":"d8a1c064.b1d77","type":"debug","z":"bcf4cc8f.ed877","name":"Extract_Message","active":false,"console":"false","complete":"payload","x":940,"y":200,"wires":[]},{"id":"2b93f737.fd94f8","type":"function","z":"bcf4cc8f.ed877","name":"Extract_Test","func":"var myStringArray = msg.payload; // load the array with the incoming messgae\nvar arrayLength = myStringArray.length; // how many are in the array\nvar ext_msg;\nvar invalid_Data = false;\nfor (var i = 0; i < arrayLength; i++) // create a loop to test the following\n    {\n    if (myStringArray[i].Temperature === -127) // trap error in data\n        {\n        invalid_Data = true;\n        } \n    else if (myStringArray[i].Temperature === '00.00') // trap 00.00 error in data\n        {\n        invalid_Data = true;\n        }\n        \n    if (invalid_Data === false)\n        {\n        ext_msg = [ // setup the message for the transmission to Influxdb\n            {\n            measurement: \"local-temperatures-test1\",\n            fields: { Temperature: (myStringArray[i].Temperature) }, // trans-scribe from the array Temperature data \n            tags:{ ROM: (myStringArray[i].ROM) }, // trans-scribe from the array ROM data\n            timestamp: new Date()\n            }];\n        node.send({payload:ext_msg}); // send each element message\n        }\n    else \n        {\n        node.send({payload:null}); // send null if data corrupt\n        }\n    }\nreturn null;","outputs":1,"noerr":0,"x":720,"y":200,"wires":[["d8a1c064.b1d77"]]}]