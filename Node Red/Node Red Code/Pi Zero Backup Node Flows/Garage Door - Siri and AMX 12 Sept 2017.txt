[{"id":"3d2aaba8.191e34","type":"debug","z":"2c89ed44.3eb0c2","name":"","active":true,"console":"false","complete":"false","x":820.8691635131836,"y":32.92460632324219,"wires":[]},{"id":"1fb39f79.e9b431","type":"debug","z":"2c89ed44.3eb0c2","name":"","active":true,"console":"false","complete":"false","x":387.0654716491699,"y":120.47620582580566,"wires":[]},{"id":"5ff8e0b5.f5f19","type":"function","z":"2c89ed44.3eb0c2","name":"Split Data - Garage Door","func":"// seperate string in arrays and find how many elements in array\nvar msgdata = msg.payload.split(\" \");\nvar datalength = msgdata.length;\nvar door_mode = 'open';\n\nfor (i = 0; i < msgdata.length; i++) // look for the word one\n    { \n    if (msgdata[i] == \"front\")\n        {\n        var garage_door_index = i;\n        var door_number = 1;\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word one\n    { \n    if (msgdata[i] == \"rear\")\n        {\n        var shed_door_index = i;\n        var door_number = 2;\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word one\n    { \n    if (msgdata[i] == \"shed\")\n        {\n        var shed_door_index = i;\n        var door_number = 2;\n        }\n    }\n    \nfor (i = 0; i < msgdata.length; i++) // look for the word open\n    { \n    if (msgdata[i] == \"open\")\n        {\n        var door_mode_index = i;\n        door_mode = 'open';\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word close\n    { \n    if (msgdata[i] == \"close\")\n        {\n        var door_mode_index = i;\n        door_mode = 'close';\n        }\n    }\n\n//send to output on off signals to the relay    \nif (door_number == 1) //front garage door\n    {\n    node.send ({payload:[\"front garage door \" + door_mode]});\n    }\nif (door_number == 2) //shed or rear roller door\n    {\n    node.send ({payload:[\"rear garage door \" + door_mode]});\n    }\n    \nreturn [null];","outputs":"1","noerr":0,"x":426.50000762939453,"y":76.6746244430542,"wires":[["d4f7c139.253ea","3d2aaba8.191e34","ec7dd040.11bc1"]]},{"id":"83632d79.982c2","type":"link in","z":"2c89ed44.3eb0c2","name":"Relay Data From Siri","links":["5ba4435b.ef26fc","706e2a5b.bec1b4"],"x":161.6666555404663,"y":59.388885498046875,"wires":[["1fb39f79.e9b431","5ff8e0b5.f5f19"]]},{"id":"d4f7c139.253ea","type":"link out","z":"2c89ed44.3eb0c2","name":"Garage Door","links":["9eae1330.feb3b"],"x":765.5477962493896,"y":76.23809242248535,"wires":[]},{"id":"c852ee5d.18841","type":"inject","z":"2c89ed44.3eb0c2","name":"Garage Door Open","topic":"","payload":"front garage door open","payloadType":"str","repeat":"","crontab":"","once":false,"x":170.14286586216517,"y":202.57143293108257,"wires":[["cab18f58.93356"]]},{"id":"c219a38d.ca581","type":"function","z":"2c89ed44.3eb0c2","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":633.0000267028809,"y":277.71430921554565,"wires":[["69c8ac93.4a0ac4","d4f7c139.253ea","3cdb37c6.e97f98"]]},{"id":"cab18f58.93356","type":"ui_button","z":"2c89ed44.3eb0c2","name":"Garage Door Open","group":"9c3ee803.fb0ec8","order":1,"width":"3","height":"1","passthru":true,"label":"Garage Door Open","color":"","bgcolor":"","icon":"","payload":"front garage door open","payloadType":"str","topic":"","x":371.41272735595703,"y":203.14288234710693,"wires":[["c219a38d.ca581"]]},{"id":"82f21b4a.e71488","type":"inject","z":"2c89ed44.3eb0c2","name":"Garage Door Close","topic":"","payload":"front garage door close","payloadType":"str","repeat":"","crontab":"","once":false,"x":171.42857360839844,"y":252.85714721679688,"wires":[["3a241051.f225e"]]},{"id":"3a241051.f225e","type":"ui_button","z":"2c89ed44.3eb0c2","name":"Garage Door Close","group":"9c3ee803.fb0ec8","order":3,"width":"3","height":"1","passthru":true,"label":"Garage Door Close","color":"","bgcolor":"","icon":"","payload":"front garage door close","payloadType":"str","topic":"","x":372.5714874267578,"y":252.85715198516846,"wires":[["c219a38d.ca581"]]},{"id":"3e7bf78d.a85568","type":"inject","z":"2c89ed44.3eb0c2","name":"Rear Door Open","topic":"","payload":"rear garage door open","payloadType":"str","repeat":"","crontab":"","once":false,"x":157.14285278320312,"y":302.8571472167969,"wires":[["75ae32bd.2ffbec"]]},{"id":"75ae32bd.2ffbec","type":"ui_button","z":"2c89ed44.3eb0c2","name":"Rear Door Open","group":"9c3ee803.fb0ec8","order":2,"width":"3","height":"1","passthru":true,"label":"Rear Door Open","color":"","bgcolor":"Blue","icon":"","payload":"rear garage door open","payloadType":"str","topic":"","x":370.85715321132113,"y":303.42860044751853,"wires":[["c219a38d.ca581"]]},{"id":"db841eca.542f9","type":"inject","z":"2c89ed44.3eb0c2","name":"Rear Door Close","topic":"","payload":"rear garage door close","payloadType":"str","repeat":"","crontab":"","once":false,"x":158.4285605294364,"y":353.1428615025112,"wires":[["cfcca0a6.c0617"]]},{"id":"cfcca0a6.c0617","type":"ui_button","z":"2c89ed44.3eb0c2","name":"Rear Door Close","group":"9c3ee803.fb0ec8","order":4,"width":"3","height":"1","passthru":true,"label":"Rear Door Close","color":"","bgcolor":"Blue","icon":"","payload":"rear garage door close","payloadType":"str","topic":"","x":370.57147434779574,"y":353.1428662708828,"wires":[["c219a38d.ca581"]]},{"id":"69c8ac93.4a0ac4","type":"debug","z":"2c89ed44.3eb0c2","name":"","active":false,"console":"false","complete":"false","x":823.571533203125,"y":319.1428527832031,"wires":[]},{"id":"da788d2d.657d9","type":"function","z":"2c89ed44.3eb0c2","name":"Siri Said","func":"//var myDelay = setInterval(myTimer, 1000);\n\nvar newWord = msg.payload;\n//var newWord = msg.payload.toString();\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n\n//newMsg = \"Siri said\";\n//node.send ({payload:newMsg});\n//sleep(500);\n\nnewMsg = newWord;\nnode.send ({payload:newMsg});\n\n//sleep(500);\n\n//newMsg =\"Degrees\";\n//node.send ({payload:newMsg});\n\n\n//msg.payload = msg.payload.toString();\n//msg = \"Current Temperature is\";\n//+msg+\"Degrees\"';\n//msg = 'Current Temperature is\"'+msg+'Degrees\"'\n//newMsg = 'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"'+msg+',au\") and u=\"c\"';\n\n//msg = \"Relay Three Off\";\n//node.send ({payload:newMsg});\nreturn null;","outputs":1,"noerr":0,"x":929.7778930664062,"y":463.66666412353516,"wires":[[]]},{"id":"c4b6f0f7.0b486","type":"debug","z":"2c89ed44.3eb0c2","name":"","active":true,"console":"false","complete":"false","x":1073,"y":63,"wires":[]},{"id":"ec7dd040.11bc1","type":"function","z":"2c89ed44.3eb0c2","name":"Siri Said","func":"var newWord = msg.payload.toString();\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n//newMsg = \"Siri said\";\n//node.send ({payload:newMsg});\nsleep (500);\n\nif (newWord == \"front garage door open\")\n    {\n    newMsg = \"front garage door open\";\n    node.send ({payload:newMsg});\n    }\nif (newWord == \"front garage door close\")\n    {\n    newMsg = \"front garage door close\";\n    node.send ({payload:newMsg});\n    }\nif (newWord == \"rear garage door open\")\n    {\n    newMsg = \"rear garage door open\";\n    node.send ({payload:newMsg});\n    }\nif (newWord == \"rear garage door close\")\n    {\n    newMsg = \"rear garage door close\";\n    node.send ({payload:newMsg});\n    }\nreturn null;\n","outputs":1,"noerr":0,"x":826,"y":130,"wires":[["c4b6f0f7.0b486","424c69be.605328"]]},{"id":"3cdb37c6.e97f98","type":"function","z":"2c89ed44.3eb0c2","name":"System Said","func":"var newWord = msg.payload.toString();\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n\nif (newWord == \"front garage door open\")\n    {\n    newMsg = \"front garage door opening\";\n    node.send ({payload:newMsg});\n    }\nif (newWord == \"front garage door close\")\n    {\n    newMsg = \"front garage door closing\";\n    node.send ({payload:newMsg});\n    }\nif (newWord == \"rear garage door open\")\n    {\n    newMsg = \"rear garage door opening\";\n    node.send ({payload:newMsg});\n    }\nif (newWord == \"rear garage door close\")\n    {\n    newMsg = \"rear garage door closing\";\n    node.send ({payload:newMsg});\n    }\nreturn null;\n","outputs":1,"noerr":0,"x":889.3333511352539,"y":206.333327293396,"wires":[["424c69be.605328"]]},{"id":"424c69be.605328","type":"link out","z":"2c89ed44.3eb0c2","name":"From Garage Doors","links":["ec902402.46e358"],"x":1071,"y":160,"wires":[]},{"id":"9c3ee803.fb0ec8","type":"ui_group","z":"","name":"Garage Door","tab":"279ae69f.8b341a","disp":true,"width":"6"},{"id":"279ae69f.8b341a","type":"ui_tab","z":"","name":"Garage Doors","icon":"dashboard","order":7}]