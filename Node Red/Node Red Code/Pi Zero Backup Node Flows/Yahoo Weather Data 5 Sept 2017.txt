[{"id":"58b45fe9.1bccb","type":"inject","z":"531b71aa.d80bd","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":124.28569793701172,"y":61.42856788635254,"wires":[["c19942e7.1d443"]]},{"id":"c19942e7.1d443","type":"http request","z":"531b71aa.d80bd","name":"","method":"GET","ret":"txt","url":"https://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20weather.forecast%20where%20woeid%20in%20(select%20woeid%20from%20geo.places(1)%20where%20text%3D%22dandenong%2C%20au%22)&format=json&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys","tls":"","x":290.0000305175781,"y":64.28570175170898,"wires":[["74783f2c.26c97"]]},{"id":"c4ca874b.5ee398","type":"debug","z":"531b71aa.d80bd","name":"","active":false,"console":"false","complete":"payload","x":890,"y":32.857139587402344,"wires":[]},{"id":"74783f2c.26c97","type":"json","z":"531b71aa.d80bd","name":"","x":465.714298248291,"y":67.14285469055176,"wires":[["af2b2d84.2424f"]]},{"id":"af2b2d84.2424f","type":"change","z":"531b71aa.d80bd","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.wind.chill","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":632.8571090698242,"y":68.57142066955566,"wires":[["c4ca874b.5ee398"]]},{"id":"6f406334.9ab3dc","type":"file","z":"531b71aa.d80bd","name":"Capture File","filename":"Dandenong Weather Capture.txt","appendNewline":true,"createDir":false,"overwriteFile":"true","x":927.0237579345703,"y":220.23813247680664,"wires":[]},{"id":"e04efdcc.0857d","type":"change","z":"531b71aa.d80bd","name":"Convert Query","rules":[{"t":"set","p":"query","pt":"msg","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":518.3333206176758,"y":181.66665732860565,"wires":[["e79fcc8c.510b8"]]},{"id":"14e4d6c2.e5e0e9","type":"function","z":"531b71aa.d80bd","name":"Select City","func":"msg = msg.payload;\nvar newMsg;\n//and u='c'\"\n//select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"jiangmen,cn\") and u=\"c\"\n\nnewMsg = 'select * from weather.forecast where woeid in (select woeid from geo.places(1) where text=\"'+msg+',au\") and u=\"c\"';\nnode.send ({payload:[newMsg]});\nreturn null;","outputs":1,"noerr":0,"x":340.00000762939453,"y":180.00000190734863,"wires":[["e04efdcc.0857d"]]},{"id":"e79fcc8c.510b8","type":"http request","z":"531b71aa.d80bd","name":"","method":"GET","ret":"txt","url":"https://query.yahooapis.com/v1/public/yql?q={{{query}}}&format=json","tls":"","x":716.6667175292969,"y":181.33331489562988,"wires":[["c42cbd3e.4c95e","6f406334.9ab3dc","739a8553.0f400c"]]},{"id":"5ea85323.68438c","type":"inject","z":"531b71aa.d80bd","name":"Dandenong","topic":"","payload":"dandenong","payloadType":"str","repeat":"","crontab":"","once":false,"x":100.41666412353516,"y":254.58331489562988,"wires":[["a9890335.33d9e"]]},{"id":"8b3535cc.b2cf88","type":"inject","z":"531b71aa.d80bd","name":"Sydney","topic":"","payload":"sydney","payloadType":"str","repeat":"","crontab":"","once":false,"x":81.25,"y":290.0000352859497,"wires":[["8a3f6a4d.e1ff18"]]},{"id":"c42cbd3e.4c95e","type":"debug","z":"531b71aa.d80bd","name":"","active":false,"console":"false","complete":"false","x":926.6666666666665,"y":169.99999999999997,"wires":[]},{"id":"3000cf17.bcd57","type":"file in","z":"531b71aa.d80bd","name":"Yahoo Weather capture","filename":"Dandenong Weather Capture.txt","format":"utf8","x":372.32142639160156,"y":577.3809242248535,"wires":[["6246c92b.4def08"]]},{"id":"af7691a2.2c16a","type":"inject","z":"531b71aa.d80bd","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":129.70248413085938,"y":587.5001544952393,"wires":[["3000cf17.bcd57"]]},{"id":"3e9509a7.4e4096","type":"debug","z":"531b71aa.d80bd","name":"","active":false,"console":"false","complete":"false","x":853.3332214355469,"y":291.1309976577759,"wires":[]},{"id":"739a8553.0f400c","type":"json","z":"531b71aa.d80bd","name":"","x":663.3332977294922,"y":308.33333683013916,"wires":[["3e9509a7.4e4096","407c3e26.a892f","298e4cc.719a2b4","dc4af812.a93f68","39d996d7.c62bda","4c871433.d5dd5c","e4f04a09.4a8528","9076a18.b9a8d6","dba89c4c.69be4","478cbe43.b8be","6da6e5d4.df1ddc","58124c91.f667b4","2d548197.b6f69e","6246c92b.4def08"]]},{"id":"407c3e26.a892f","type":"change","z":"531b71aa.d80bd","name":"Wind Chill","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.wind.chill","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":848.3333053588867,"y":359.99998474121094,"wires":[["b0084094.a12c9"]]},{"id":"298e4cc.719a2b4","type":"change","z":"531b71aa.d80bd","name":"Direction","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.wind.direction","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":846.6666717529297,"y":403.3332996368408,"wires":[["61f489d0.d0c978"]]},{"id":"dc4af812.a93f68","type":"change","z":"531b71aa.d80bd","name":"Speed","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.wind.speed","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":836.3333206176758,"y":443.33331203460693,"wires":[["36017c04.bab984"]]},{"id":"61f489d0.d0c978","type":"ui_gauge","z":"531b71aa.d80bd","name":"Wind Direction","group":"4cae4070.2c918","order":4,"width":"6","height":"2","gtype":"compass","title":"Wind Direction","label":"Degrees","format":"{{value}}","min":"1","max":"360","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1058.6666259765625,"y":402.9999656677246,"wires":[]},{"id":"b0084094.a12c9","type":"ui_gauge","z":"531b71aa.d80bd","name":"Wind Chill","group":"4cae4070.2c918","order":2,"width":"3","height":"1","gtype":"gage","title":"Wind Chill","label":"units","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1039.999900817871,"y":359.99994468688965,"wires":[]},{"id":"36017c04.bab984","type":"ui_gauge","z":"531b71aa.d80bd","name":"Wind Speed","group":"4cae4070.2c918","order":3,"width":"3","height":"2","gtype":"gage","title":"Wind Speed","label":"kph","format":"{{value}}","min":0,"max":"120","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1051.6666679382324,"y":443.33334159851074,"wires":[]},{"id":"39d996d7.c62bda","type":"change","z":"531b71aa.d80bd","name":"Humidity","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.atmosphere.humidity","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":844.9999389648438,"y":484.33331298828125,"wires":[["5773fd1c.9d2044"]]},{"id":"4c871433.d5dd5c","type":"change","z":"531b71aa.d80bd","name":"Pressure","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.atmosphere.pressure","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":844.6666259765625,"y":524.3333129882812,"wires":[["976e8d58.1d3f"]]},{"id":"e4f04a09.4a8528","type":"change","z":"531b71aa.d80bd","name":"Rising","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.atmosphere.rising","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":835.6666259765625,"y":566,"wires":[["75491ac.fff62e4"]]},{"id":"5773fd1c.9d2044","type":"ui_gauge","z":"531b71aa.d80bd","name":"Humidity","group":"4cae4070.2c918","order":5,"width":"3","height":"2","gtype":"gage","title":"Humidity","label":"Degrees","format":"{{value}}","min":0,"max":"100","colors":["#00b500","#e6e600","#ca3838"],"seg1":"","seg2":"","x":1040.6665878295898,"y":484.66667652130127,"wires":[]},{"id":"75491ac.fff62e4","type":"function","z":"531b71aa.d80bd","name":"Rise and Fall","func":"var msg = msg.payload;\nvar newMsg;\nif (msg == '0')\n    {\n    newMsg = \"Steady\";\n    node.send ({payload:newMsg});   \n    }\nif (msg == '1')\n    {\n    newMsg = \"Rising\";\n    node.send ({payload:newMsg});   \n    }\nif (msg == '2')\n    {\n    newMsg = \"Falling\";\n    node.send ({payload:newMsg});   \n    }\nreturn null;","outputs":1,"noerr":0,"x":991.6665420532227,"y":565.9999618530273,"wires":[["46008025.0e026"]]},{"id":"46008025.0e026","type":"ui_text","z":"531b71aa.d80bd","group":"fd9bffd6.811b5","order":2,"width":"2","height":"1","name":"Pressure Rise / Fall","label":"Current Pressure","format":"{{msg.payload}}","layout":"col-center","x":1188.3332176208496,"y":566.0000638961792,"wires":[]},{"id":"9076a18.b9a8d6","type":"change","z":"531b71aa.d80bd","name":"Visibilty","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.atmosphere.visibility","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":844.6666259765625,"y":606.3333129882812,"wires":[["34534068.9c5fe"]]},{"id":"3e1a3ed.d4d19c2","type":"debug","z":"531b71aa.d80bd","name":"","active":false,"console":"false","complete":"false","x":1050.250015258789,"y":804.0833864212036,"wires":[]},{"id":"dba89c4c.69be4","type":"change","z":"531b71aa.d80bd","name":"Sunrise","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.astronomy.sunrise","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":842.5,"y":646,"wires":[["3e236816.0853a8"]]},{"id":"478cbe43.b8be","type":"change","z":"531b71aa.d80bd","name":"Sunset","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.astronomy.sunset","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":841.75,"y":685.5,"wires":[["d7db8580.3a8438"]]},{"id":"d7db8580.3a8438","type":"ui_text","z":"531b71aa.d80bd","group":"fd9bffd6.811b5","order":3,"width":"2","height":"1","name":"Sunset","label":"Sunset","format":"{{msg.payload}}","layout":"col-center","x":1039.500015258789,"y":685.5000114440918,"wires":[]},{"id":"3e236816.0853a8","type":"ui_text","z":"531b71aa.d80bd","group":"fd9bffd6.811b5","order":4,"width":"2","height":"1","name":"Sunrise","label":"Sunrise","format":"{{msg.payload}}","layout":"col-center","x":1039.000015258789,"y":646.2500114440918,"wires":[]},{"id":"6da6e5d4.df1ddc","type":"change","z":"531b71aa.d80bd","name":"Current Temp","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.item.condition.temp","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":860,"y":723.5,"wires":[["dbcde897.edb128","9e42f465.389b98"]]},{"id":"dbcde897.edb128","type":"ui_gauge","z":"531b71aa.d80bd","name":"Current Temp","group":"4cae4070.2c918","order":1,"width":"3","height":"2","gtype":"gage","title":"Current Temp","label":"degrees","format":"{{value}}","min":"-10","max":"50","colors":["#0080c0","#00b500","#ca3838"],"seg1":"19","seg2":"23","x":1059.000015258789,"y":723.0000114440918,"wires":[]},{"id":"58124c91.f667b4","type":"change","z":"531b71aa.d80bd","name":"Current Condition","rules":[{"t":"set","p":"payload","pt":"msg","to":"msg.payload.query.results.channel.item.condition.text","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":868.5,"y":764,"wires":[["3e1a3ed.d4d19c2","b6bb53ec.a5026"]]},{"id":"b6bb53ec.a5026","type":"ui_text","z":"531b71aa.d80bd","group":"fd9bffd6.811b5","order":6,"width":"2","height":"1","name":"Current Condition","label":"Condition","format":"{{msg.payload}}","layout":"col-center","x":1069.500015258789,"y":763.0000133514404,"wires":[]},{"id":"2d548197.b6f69e","type":"link out","z":"531b71aa.d80bd","name":"Yahoo Weather Forecast Data","links":["21b48ce8.e35564"],"x":776.5001440048218,"y":249.82142448425293,"wires":[]},{"id":"a9890335.33d9e","type":"ui_button","z":"531b71aa.d80bd","name":"Dandenong","group":"cca54976.b50ae8","order":0,"width":"2","height":"1","passthru":true,"label":"Dandenong","color":"","bgcolor":"","icon":"","payload":"dandenong","payloadType":"str","topic":"","x":262.00000381469727,"y":255.00000381469727,"wires":[["14e4d6c2.e5e0e9"]]},{"id":"8a3f6a4d.e1ff18","type":"ui_button","z":"531b71aa.d80bd","name":"Sydney","group":"cca54976.b50ae8","order":0,"width":"2","height":"1","passthru":true,"label":"Sydney","color":"","bgcolor":"","icon":"","payload":"sydney","payloadType":"str","topic":"","x":252.5,"y":289.50000381469727,"wires":[["14e4d6c2.e5e0e9"]]},{"id":"eeab56ec.513698","type":"ui_button","z":"531b71aa.d80bd","name":"Canberra","group":"cca54976.b50ae8","order":0,"width":"2","height":"1","passthru":true,"label":"Canberra","color":"","bgcolor":"","icon":"","payload":"Canberra","payloadType":"str","topic":"","x":251.50000381469727,"y":325.2500047683716,"wires":[["14e4d6c2.e5e0e9"]]},{"id":"2faca933.e96cb6","type":"ui_button","z":"531b71aa.d80bd","name":"Adelaide","group":"cca54976.b50ae8","order":0,"width":"2","height":"1","passthru":true,"label":"Adelaide","color":"","bgcolor":"","icon":"","payload":"adelaide","payloadType":"str","topic":"","x":249.75,"y":361.25,"wires":[["14e4d6c2.e5e0e9"]]},{"id":"abe34b7e.f67eb8","type":"ui_button","z":"531b71aa.d80bd","name":"Perth","group":"cca54976.b50ae8","order":0,"width":"2","height":"1","passthru":true,"label":"Perth","color":"","bgcolor":"","icon":"","payload":"perth","payloadType":"str","topic":"","x":239.75,"y":396.75,"wires":[["14e4d6c2.e5e0e9"]]},{"id":"f1a83209.7bc18","type":"ui_button","z":"531b71aa.d80bd","name":"Brisbane","group":"cca54976.b50ae8","order":0,"width":"2","height":"1","passthru":true,"label":"Brisbane","color":"","bgcolor":"","icon":"","payload":"brisbane","payloadType":"str","topic":"","x":247.75,"y":432,"wires":[["14e4d6c2.e5e0e9"]]},{"id":"ee85abdc.d2f448","type":"ui_button","z":"531b71aa.d80bd","name":"Darwin","group":"cca54976.b50ae8","order":0,"width":"2","height":"1","passthru":true,"label":"Darwin","color":"","bgcolor":"","icon":"","payload":"darwin","payloadType":"str","topic":"","x":246.5,"y":468,"wires":[["14e4d6c2.e5e0e9"]]},{"id":"c600fc03.2b3d5","type":"ui_button","z":"531b71aa.d80bd","name":"Cairns","group":"cca54976.b50ae8","order":0,"width":"2","height":"1","passthru":true,"label":"Cairns","color":"","bgcolor":"","icon":"","payload":"carins","payloadType":"str","topic":"","x":235,"y":504,"wires":[["14e4d6c2.e5e0e9"]]},{"id":"7af76d08.a267c4","type":"inject","z":"531b71aa.d80bd","name":"Canberra","topic":"","payload":"canberra","payloadType":"str","repeat":"","crontab":"","once":false,"x":91.25,"y":326.25,"wires":[["eeab56ec.513698"]]},{"id":"25fb8c75.66bfd4","type":"inject","z":"531b71aa.d80bd","name":"Adelaide","topic":"","payload":"adelaide","payloadType":"str","repeat":"","crontab":"","once":false,"x":92.5,"y":362.5,"wires":[["2faca933.e96cb6"]]},{"id":"2e698a4c.6dd156","type":"inject","z":"531b71aa.d80bd","name":"Perth","topic":"","payload":"perth","payloadType":"str","repeat":"","crontab":"","once":false,"x":83.75,"y":397.5,"wires":[["abe34b7e.f67eb8"]]},{"id":"4213899.0da9678","type":"inject","z":"531b71aa.d80bd","name":"Brisbane","topic":"","payload":"brisbane","payloadType":"str","repeat":"","crontab":"","once":false,"x":93.75,"y":432.25,"wires":[["f1a83209.7bc18"]]},{"id":"5b13ada0.b72704","type":"inject","z":"531b71aa.d80bd","name":"Darwin","topic":"","payload":"darwin","payloadType":"str","repeat":"","crontab":"","once":false,"x":84.75,"y":466.25000762939453,"wires":[["ee85abdc.d2f448"]]},{"id":"70b1c53a.562cac","type":"inject","z":"531b71aa.d80bd","name":"Ciarns","topic":"","payload":"cairns","payloadType":"str","repeat":"","crontab":"","once":false,"x":86.25,"y":502,"wires":[["c600fc03.2b3d5"]]},{"id":"34534068.9c5fe","type":"ui_text","z":"531b71aa.d80bd","group":"fd9bffd6.811b5","order":5,"width":"2","height":"1","name":"Visibility","label":"Visibility ","format":"{{msg.payload}}kms","layout":"col-center","x":1038.3333435058594,"y":608.3333606719971,"wires":[]},{"id":"976e8d58.1d3f","type":"function","z":"531b71aa.d80bd","name":"Convert to Miilbars","func":"var msg = msg.payload;\nvar newMsg = msg * 0.02953;\nnode.send ({payload:newMsg});   \nreturn null;","outputs":1,"noerr":0,"x":1016.6666488647461,"y":524.9999847412109,"wires":[["b9da4e12.6980d"]]},{"id":"b9da4e12.6980d","type":"ui_text","z":"531b71aa.d80bd","group":"fd9bffd6.811b5","order":1,"width":"2","height":"1","name":"Pressure","label":"Pressure","format":"{{msg.payload.toFixed(0)}}kpa","layout":"col-center","x":1193.3333435058594,"y":524.9999885559082,"wires":[]},{"id":"95301c6.0cccde","type":"link in","z":"531b71aa.d80bd","name":"From AMX - Yahoo Weather request","links":["25ff3050.5d7"],"x":115.71428537368774,"y":109.28571701049805,"wires":[["14e4d6c2.e5e0e9","322a30dc.cf0f5"]]},{"id":"6246c92b.4def08","type":"link out","z":"531b71aa.d80bd","name":"Received Data from Yahoo","links":["5a192d4d.732b24","9eae1330.feb3b"],"x":525.6787881851196,"y":431.1428909301758,"wires":[]},{"id":"322a30dc.cf0f5","type":"debug","z":"531b71aa.d80bd","name":"","active":false,"console":"false","complete":"false","x":401.5714372907366,"y":122.00001307896204,"wires":[]},{"id":"9e42f465.389b98","type":"link out","z":"531b71aa.d80bd","name":"From Weather Station","links":["2943059a.6af58a"],"x":1019.2778835296631,"y":925.4444646835327,"wires":[]},{"id":"4cae4070.2c918","type":"ui_group","z":"","name":"Yahoo Weather","tab":"2d602d9b.372922","order":1,"disp":true,"width":"3"},{"id":"fd9bffd6.811b5","type":"ui_group","z":"","name":"Yahoo Weather Conditions","tab":"2d602d9b.372922","order":2,"disp":true,"width":"4"},{"id":"cca54976.b50ae8","type":"ui_group","z":"","name":"City","tab":"2d602d9b.372922","order":3,"disp":true,"width":"2"},{"id":"2d602d9b.372922","type":"ui_tab","z":"","name":"Yahoo Weather","icon":"dashboard","order":10}]