[{"id":"a8e294f9.7c3e98","type":"link in","z":"4ee12ad4.4ad364","name":"Receive Siri Data","links":["5ba4435b.ef26fc"],"x":149,"y":101,"wires":[["57be0892.a43208"]]},{"id":"5511623c.05eccc","type":"link out","z":"4ee12ad4.4ad364","name":"Send to AMX","links":["9eae1330.feb3b"],"x":855,"y":113,"wires":[]},{"id":"1aaeebb3.4259b4","type":"ui_button","z":"4ee12ad4.4ad364","name":"Sub Woofer On","group":"7de6769e.bd9dd8","order":0,"width":"3","height":"1","passthru":true,"label":"Sub Woofer On","color":"Black","bgcolor":"Yellow","icon":"","payload":"sub woofer on","payloadType":"str","topic":"","x":579,"y":55,"wires":[["5511623c.05eccc","f39a55de.5826a8"]]},{"id":"dcf1e426.0e5d18","type":"inject","z":"4ee12ad4.4ad364","name":"Sub Woofer On","topic":"","payload":"sub woofer on","payloadType":"str","repeat":"","crontab":"","once":false,"x":162,"y":43,"wires":[["1aaeebb3.4259b4"]]},{"id":"74460833.b1be98","type":"ui_button","z":"4ee12ad4.4ad364","name":"Sub Woofer Off","group":"7de6769e.bd9dd8","order":0,"width":"3","height":"1","passthru":true,"label":"Sub Woofer Off","color":"Black","bgcolor":"Yellow","icon":"","payload":"sub woofer off","payloadType":"str","topic":"","x":582,"y":141,"wires":[["5511623c.05eccc","2962436b.fe350c"]]},{"id":"b615f37a.fd046","type":"inject","z":"4ee12ad4.4ad364","name":"Sub Woofer Off","topic":"","payload":"sub woofer off","payloadType":"str","repeat":"","crontab":"","once":false,"x":141,"y":151,"wires":[["74460833.b1be98"]]},{"id":"57be0892.a43208","type":"function","z":"4ee12ad4.4ad364","name":"Extract Sub Woofer Controls","func":"var msgdata = msg.payload.split(\" \");\nvar newMsg = {};\nnewMsg.topic = \"Sub Woofer Controls\";\nvar datalength = msgdata.length;\nvar subwoofer_found = 0;\n//var door_mode = 'open';\nfor (i = 0; i < msgdata.length; i++) // look for the word sub\n    { \n    if (msgdata[i] == \"sub\")\n        {\n        subwoofer_found = 1; // found sub word\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word woofer\n    { \n    if (msgdata[i] == \"woofer\")\n        {\n        subwoofer_found = 1; // found sub word\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word subwoofer\n    { \n    if (msgdata[i] == \"subwoofer\")\n        {\n        subwoofer_found = 1; // found sub woofer word\n        }\n    }\nif (subwoofer_found)\n    {\n    for (i = 0; i < msgdata.length; i++) // look for the word on with subwoofer\n        { \n        if (msgdata[i] == \"on\")\n            {\n            var subwoofer_mode = 1; // found on word\n            node.send ({payload:[\"sub woofer on\"]}); // send string to AMX\n            }\n        }\n    for (i = 0; i < msgdata.length; i++) // look for the word off with subwoofer\n        { \n        if (msgdata[i] == \"off\")\n            {\n            var subwoofer_mode = 0; // found off word\n            node.send ({payload:[\"sub woofer off\"]}); // send string to AMX\n            }\n        }\n    }\nreturn null;","outputs":1,"noerr":0,"x":402,"y":96,"wires":[["5511623c.05eccc","9aeb2644.a73728"]]},{"id":"17b47626.676a6a","type":"function","z":"4ee12ad4.4ad364","name":"Siri Said","func":"var msgdata = msg.payload.split(\" \");\nvar newMsg = {};\nnewMsg.topic = \"Sub Woofer Controls\";\nvar datalength = msgdata.length;\nvar subwoofer_found = 0;\n//var door_mode = 'open';\nfor (i = 0; i < msgdata.length; i++) // look for the word sub\n    { \n    if (msgdata[i] == \"sub\")\n        {\n        subwoofer_found = 1; // found sub word\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word woofer\n    { \n    if (msgdata[i] == \"woofer\")\n        {\n        subwoofer_found = 1; // found sub word\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word subwoofer\n    { \n    if (msgdata[i] == \"subwoofer\")\n        {\n        subwoofer_found = 1; // found sub woofer word\n        }\n    }\nif (subwoofer_found)\n    {\n    for (i = 0; i < msgdata.length; i++) // look for the word on with subwoofer\n        { \n        if (msgdata[i] == \"on\")\n            {\n            var subwoofer_mode = 1; // found on word\n            node.send ({payload:[\"sub woofer on\"]}); // send string to AMX\n            }\n        }\n    for (i = 0; i < msgdata.length; i++) // look for the word off with subwoofer\n        { \n        if (msgdata[i] == \"off\")\n            {\n            var subwoofer_mode = 0; // found off word\n            node.send ({payload:[\"sub woofer off\"]}); // send string to AMX\n            }\n        }\n    }\nreturn null;","outputs":1,"noerr":0,"x":470,"y":254,"wires":[[]]},{"id":"9aeb2644.a73728","type":"function","z":"4ee12ad4.4ad364","name":"Siri Said","func":"var newWord = msg.payload.toString();\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\nnewMsg = \"Siri said\";\nnode.send ({payload:newMsg});\nsleep (500);\nnewMsg = \"sub woofer\";\nnode.send ({payload:newMsg});\nsleep (250);\n    \nif (newWord == \"sub woofer on\")\n    {\n    newMsg = \"on\";\n    node.send ({payload:newMsg});\n    }\nif (newWord == \"sub woofer off\")\n    {\n    newMsg = \"off\";\n    node.send ({payload:newMsg});\n    }\nreturn null;","outputs":1,"noerr":0,"x":645,"y":231,"wires":[["14ffadfd.fe27d2","fbedc0dc.e783d"]]},{"id":"14ffadfd.fe27d2","type":"debug","z":"4ee12ad4.4ad364","name":"","active":true,"console":"false","complete":"false","x":842,"y":314,"wires":[]},{"id":"f39a55de.5826a8","type":"function","z":"4ee12ad4.4ad364","name":"Sub Woofer On","func":"var newWord = msg.payload.toString();\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n\nnewMsg = \"sub woofer\";\nnode.send ({payload:newMsg});\nsleep (250);\nnewMsg = \"on\";\nnode.send ({payload:newMsg});\nreturn null;","outputs":1,"noerr":0,"x":885,"y":53,"wires":[["fbedc0dc.e783d"]]},{"id":"2962436b.fe350c","type":"function","z":"4ee12ad4.4ad364","name":"Sub Woofer Off","func":"var newWord = msg.payload.toString();\nvar newMsg;\n\nfunction sleep(milliseconds) {\n  var start = new Date().getTime();\n  for (var i = 0; i < 1e7; i++) {\n    if ((new Date().getTime() - start) > milliseconds){\n      break;\n    }\n  }\n}\n\nnewMsg = \"sub woofer\";\nnode.send ({payload:newMsg});\nsleep (250);\nnewMsg = \"off\";\nnode.send ({payload:newMsg});\nreturn null;","outputs":1,"noerr":0,"x":866,"y":155,"wires":[["fbedc0dc.e783d"]]},{"id":"fbedc0dc.e783d","type":"link out","z":"4ee12ad4.4ad364","name":"From Lounge Room Controls","links":["ec902402.46e358"],"x":1130,"y":182,"wires":[]},{"id":"7de6769e.bd9dd8","type":"ui_group","z":"","name":"Sub Woofer","tab":"5d381381.56a17c","disp":true,"width":"3"},{"id":"5d381381.56a17c","type":"ui_tab","z":"","name":"Onkyo Amp","icon":"dashboard","order":5}]