[{"id":"bde4a504.364a48","type":"exec","z":"5073d6a.bf26d28","command":"/usr/bin//sudo python /home/pi/Documents/Chris_Programs/Python_Code/pi_ina219-master/ina219_test.py","addpay":true,"append":"","useSpawn":"","timer":"","name":"Test INA219 - 0x40","x":441.10008239746094,"y":59.100013732910156,"wires":[["3a3ffce9.543464","24353ed.5e450c2"],["2cb99ff.708716"],["280778d6.26a848"]]},{"id":"ad9a151e.f13df8","type":"inject","z":"5073d6a.bf26d28","name":"Get Values - INA219 - 0x40","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":179.10003662109375,"y":63.80002307891846,"wires":[["bde4a504.364a48"]]},{"id":"3a3ffce9.543464","type":"debug","z":"5073d6a.bf26d28","name":"","active":true,"console":"false","complete":"false","x":725.1001434326172,"y":20,"wires":[]},{"id":"2cb99ff.708716","type":"debug","z":"5073d6a.bf26d28","name":"","active":true,"console":"false","complete":"false","x":723.1001205444336,"y":58.600008487701416,"wires":[]},{"id":"280778d6.26a848","type":"debug","z":"5073d6a.bf26d28","name":"","active":true,"console":"false","complete":"false","x":722.1000671386719,"y":94.60000419616699,"wires":[]},{"id":"e299ba3e.12ce38","type":"debug","z":"5073d6a.bf26d28","name":"","active":true,"console":"false","complete":"false","x":721.3222618103027,"y":134.7111301422119,"wires":[]},{"id":"1e5f3531.eac04b","type":"debug","z":"5073d6a.bf26d28","name":"","active":false,"console":"false","complete":"false","x":717.5444641113281,"y":181.71109580993652,"wires":[]},{"id":"668a83c7.0031ac","type":"debug","z":"5073d6a.bf26d28","name":"","active":false,"console":"false","complete":"false","x":719.7666702270508,"y":232.8222484588623,"wires":[]},{"id":"b914df45.952c8","type":"exec","z":"5073d6a.bf26d28","command":"/usr/bin/sudo python /home/pi/Documents/Chris_Programs/Python_Code/LCD_Screen_Driver/i2c_lcd_printnew.py","addpay":true,"append":"","useSpawn":"","timer":"","name":"Text to Display","x":521.9167556762695,"y":212.333345413208,"wires":[["e299ba3e.12ce38"],["1e5f3531.eac04b"],["668a83c7.0031ac"]]},{"id":"ada2c640.a6d5d8","type":"function","z":"5073d6a.bf26d28","name":"","func":"msg1 = msg.payload;\n//msg_len = msg1.length;\n\nfunction extractValue(str,searchStr)\n    {\n    var startOfSection = str.indexOf(searchStr);\n    var startOfValue = str.indexOf(':',startOfSection)+1;\n    var endOffValue  = str.indexOf(':',startOfValue); //Position of first char AFTER the value, as needed for substring\n    var value = str.substring(startOfValue,endOffValue);\n    return value;\n    }\n    \nvar searchStr = 'Bus Voltage';\nvar Bus_Voltage = extractValue(msg1,searchStr);\n\nvar searchStr = 'Bus Current';\nvar Bus_Current  = (extractValue(msg1,searchStr));\n\nvar searchStr = 'Supply Voltage';\nvar Supply_Voltage  = (extractValue(msg1,searchStr));\n\nvar searchStr = 'Shunt Voltage';\nvar Shunt_Voltage  = (extractValue(msg1,searchStr));\n\nvar searchStr = 'Power';\nvar Power  = (extractValue(msg1,searchStr));\n\n\n\n// find all : locations\n//var Bus_volts_loc    = msg1.search(\"Bus Voltage\");\n//var Bus_amps_loc     = msg1.search(\"Bus Current\");\n//var Supply_volts_loc = msg1.search(\"Supply Voltage\");\n//var Shunt_volts_loc  = msg1.search(\"Shunt Voltage\");\n//var Power_loc        = msg1.search(\"Power\");\n\n// setup data values\n//var Bus_Voltage      = msg1.substring(Bus_amps_loc -7, 7);\n//var Bus_Current      = msg1.substring(Supply_volts_loc -7, 7);\n//var Power            = msg1.substring(msg_len -10, msg_len);\n\n\n// Print locations\n//node.send({payload:msg_len});\n//node.send({payload:Bus_volts_loc});\n//node.send({payload:Bus_amps_loc});\n//node.send({payload:Supply_volts_loc});\n//node.send({payload:Shunt_volts_loc});\n//node.send({payload:Power_loc});\n\n// print values\nnode.send({payload:Bus_Voltage});\nnode.send({payload:Bus_Current});\nnode.send({payload:Supply_Voltage});\nnode.send({payload:Shunt_Voltage});\nnode.send({payload:Power});\n\nreturn null;","outputs":1,"noerr":0,"x":479.4444351196289,"y":312.7777509689331,"wires":[["bdcad536.58f558"]]},{"id":"bdcad536.58f558","type":"debug","z":"5073d6a.bf26d28","name":"","active":false,"console":"false","complete":"false","x":742.3333740234375,"y":319.55556233723956,"wires":[]},{"id":"24353ed.5e450c2","type":"function","z":"5073d6a.bf26d28","name":"Extract Data","func":"var msg1 = msg.payload;\nvar newpayload = msg1.split(\"\\n\");\nvar i;\nfor (i=0; i<newpayload.length; i++) \n    {\n    var key = newpayload[i].split(\":\")[0];\n    var value = newpayload[i].split(\":\")[1];\n    newpayload[i] = \n        {\n        key: key,\n        value: value,\n        line: 2,\n        post: 2\n        };\n    }\n\nif (!newpayload[newpayload.length -1 ]) \n    {\n    newpayload.pop();\n    }\n\nvar newmsg = \n    {\n    payload: newpayload\n    };\nreturn newmsg;","outputs":1,"noerr":0,"x":248.25000762939453,"y":242.00000381469727,"wires":[["c372678c.26fff8","b914df45.952c8"]]},{"id":"c372678c.26fff8","type":"debug","z":"5073d6a.bf26d28","name":"","active":true,"console":"false","complete":"false","x":702.5,"y":270,"wires":[]}]