[{"id":"dd2e68be.6997d8","type":"link in","z":"68cc7b04.d18404","name":"Siri Aircon Controls","links":["3c9d7a1f.9af606"],"x":155.16665649414062,"y":58.55555725097656,"wires":[["90b33ece.6bc4d","4fa8d74c.3e2818","4181ae0.5c79654"]]},{"id":"90b33ece.6bc4d","type":"function","z":"68cc7b04.d18404","name":"Split Data -  Air Conditioner Zone stuff","func":"// seperate string in arrays and find how many elements in array\nvar msgdata = msg.payload.split(\" \");\nvar datalength = msgdata.length;\n\nfor (i = 0; i < msgdata.length; i++) // look for the word one\n    { \n    if (msgdata[i] == \"Zone\")\n        {\n        var Aircon_index = i;\n        //var relay_number = 1;\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word on\n    { \n    if (msgdata[i] == \"on\")\n        {\n        var on_index = i;\n        var aircon_pwr = 'on';\n        //node.send ({payload:[\"Aircon on\"]});\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word off\n    { \n    if (msgdata[i] == \"off\")\n        {\n        var off_index = i;\n        var aircon_pwr = 'off';\n        //node.send ({payload:[\"Aircon off\"]});\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word zone 1\n    { \n    if (msgdata[i] == \"one\")\n        {\n        var zone_index = i;\n        var aircon_zone = 1;\n        //node.send ({payload:[\"Aircon zone 1\"]});\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word to\n    { \n    if (msgdata[i] == \"to\")\n        {\n        var zone_index = i;\n        var aircon_zone = 2;\n        //node.send ({payload:[\"Aircon zone 2\"]});\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word zone 2\n    { \n    if (msgdata[i] == \"two\")\n        {\n        var zone_index = i;\n        var aircon_zone = 2;\n        //node.send ({payload:[\"Aircon zone 2\"]});\n        }\n    }\n\nif (aircon_zone == 1)\n    {\n    if (aircon_pwr == 'on')\n        {\n        node.send ({payload:[\"Aircon zone 1 on\"]});    \n        }\n    if (aircon_pwr == 'off')\n        {\n        node.send ({payload:[\"Aircon zone 1 off\"]});    \n        }\n    }\nif (aircon_zone == 2)\n    {\n    if (aircon_pwr == 'on')\n        {\n        node.send ({payload:[\"Aircon zone 2 on\"]});    \n        }\n    if (aircon_pwr == 'off')\n        {\n        node.send ({payload:[\"Aircon zone 2 off\"]});    \n        }\n    }\n\nreturn [null];","outputs":"1","noerr":0,"x":584.0000076293945,"y":229.00000095367432,"wires":[["2378e16d.9017fe","c35dd413.8198e8"]]},{"id":"2378e16d.9017fe","type":"debug","z":"68cc7b04.d18404","name":"","active":true,"console":"false","complete":"false","x":1046.6666946411133,"y":301.3611207008362,"wires":[]},{"id":"4181ae0.5c79654","type":"function","z":"68cc7b04.d18404","name":"Split Data -  Air Conditioner Heat Cooling Selection","func":"// seperate string in arrays and find how many elements in array\nvar msgdata = msg.payload.split(\" \");\nvar datalength = msgdata.length;\nvar aircon_ctl = 0;\nfor (i = 0; i < msgdata.length; i++) // look for the word one\n    { \n    if (msgdata[i] == \"Aircon\")\n        {\n        var Aircon_index = i;\n        aircon_ctl = 1;\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word on\n    { \n    if (msgdata[i] == \"on\")\n        {\n        var on_index = i;\n        var aircon_pwr = 'on';\n        //node.send ({payload:[\"Aircon on\"]});\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word off\n    { \n    if (msgdata[i] == \"off\")\n        {\n        var off_index = i;\n        var aircon_pwr = 'off';\n        //node.send ({payload:[\"Aircon off\"]});\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word heat\n    { \n    if (msgdata[i] == \"heat\")\n        {\n        var heat_index = i;\n        var aircon_mode = 'heat';\n        //node.send ({payload:[\"Aircon heating\"]});\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word cool\n    { \n    if (msgdata[i] == \"cool\")\n        {\n        var heat_index = i;\n        var aircon_mode = 'cool';\n        //node.send ({payload:[\"Aircon cooling\"]});\n        }\n    }\n\n\nif (aircon_ctl == 1)\n    {\n    if (aircon_pwr == 'on')\n        {\n        node.send ({payload:[\"Aircon on\"]});\n        }\n    if (aircon_pwr == 'off')\n        {\n        node.send ({payload:[\"Aircon off\"]});\n        }\n    }\n\nif (aircon_mode == 'cool')\n    {\n    if (aircon_pwr == 'on')\n        {\n        node.send ({payload:[\"Aircon cooling on\"]});\n        }\n    if (aircon_pwr == 'off')\n        {\n        node.send ({payload:[\"Aircon cooling off\"]});\n        }\n    }\nif (aircon_mode == 'heat')\n    {\n    if (aircon_pwr == 'on')\n        {\n        node.send ({payload:[\"Aircon heating on\"]});\n        }\n    if (aircon_pwr == 'off')\n        {\n        node.send ({payload:[\"Aircon heating off\"]});\n        }\n    }\n\nreturn [null];","outputs":"1","noerr":0,"x":604.0000305175781,"y":504.0000057220459,"wires":[["2378e16d.9017fe","c35dd413.8198e8"]]},{"id":"870ccb34.a48888","type":"inject","z":"68cc7b04.d18404","name":"Zone One On","topic":"","payload":"zone one on","payloadType":"str","repeat":"","crontab":"","once":false,"x":163.16665649414062,"y":163.55558681488037,"wires":[["90b33ece.6bc4d"]]},{"id":"e927a940.8db028","type":"inject","z":"68cc7b04.d18404","name":"Zone One Off","topic":"","payload":"zone one off","payloadType":"str","repeat":"","crontab":"","once":false,"x":164,"y":201,"wires":[["90b33ece.6bc4d"]]},{"id":"2abf120c.1643de","type":"inject","z":"68cc7b04.d18404","name":"Zone Two Off","topic":"","payload":"zone two off","payloadType":"str","repeat":"","crontab":"","once":false,"x":165,"y":275.0000057220459,"wires":[["90b33ece.6bc4d"]]},{"id":"db07c1b4.345f7","type":"inject","z":"68cc7b04.d18404","name":"Zone Two On","topic":"","payload":"zone two on","payloadType":"str","repeat":"","crontab":"","once":false,"x":164,"y":240.00000381469727,"wires":[["90b33ece.6bc4d"]]},{"id":"4fa8d74c.3e2818","type":"function","z":"68cc7b04.d18404","name":"Split Data -  Air Conditioner Temperature Controls","func":"// seperate string in arrays and find how many elements in array\nvar msgdata = msg.payload.split(\" \");\nvar datalength = msgdata.length;\n\nfor (i = 0; i < msgdata.length; i++) // look for the word temp\n    { \n    if (msgdata[i] == \"temp\")\n        {\n        var ctl_index = i;\n        var aircon_ctl = 'temp';\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word temp\n    { \n    if (msgdata[i] == \"temperature\")\n        {\n        var ctl_index = i;\n        var aircon_ctl = 'temp';\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word heat\n    { \n    if (msgdata[i] == \"heat\")\n        {\n        var heat_index = i;\n        var aircon_mode = 'heat';\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word heating\n    { \n    if (msgdata[i] == \"heating\")\n        {\n        var heat_index = i;\n        var aircon_mode = 'heat';\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word cooling\n    { \n    if (msgdata[i] == \"cooling\")\n        {\n        var cool_index = i;\n        var aircon_mode = 'cool';\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word cool\n    { \n    if (msgdata[i] == \"cool\")\n        {\n        var cool_index = i;\n        var aircon_mode = 'cool';\n        }\n    }\n\n\nfor (i = 0; i < msgdata.length; i++) // look for the word up\n    { \n    if (msgdata[i] == \"up\")\n        {\n        var sliding_temp_index = i;\n        var sliding_aircon_temp = 'up';\n        }\n    }\n    \nfor (i = 0; i < msgdata.length; i++) // look for the word down\n    { \n    if (msgdata[i] == \"down\")\n        {\n        var sliding_temp_index = i;\n        var sliding_aircon_temp = 'down';\n        }\n    }\n\nif (aircon_mode == 'cool')\n    {\n    if (sliding_aircon_temp == 'up')\n        {\n        node.send ({payload:[\"Aircon cooling up\"]});\n        }\n    if (sliding_aircon_temp == 'down')\n        {\n        node.send ({payload:[\"Aircon cooling down\"]});\n        }\n    }\n\nif (aircon_mode == 'heat')\n    {\n    if (sliding_aircon_temp == 'up')\n        {\n        node.send ({payload:[\"Aircon heating up\"]});\n        }\n    if (sliding_aircon_temp == 'down')\n        {\n        node.send ({payload:[\"Aircon heating down\"]});\n        }\n    }\n\nif (aircon_ctl == 'temp')\n    {\n    if (sliding_aircon_temp == 'up')\n        {\n        node.send ({payload:[\"Aircon temp up\"]});\n        }\n    if (sliding_aircon_temp == 'down')\n        {\n        node.send ({payload:[\"Aircon temp down\"]});\n        }\n    }\n\n\nreturn [null];","outputs":"1","noerr":0,"x":604.0000457763672,"y":352.75000953674316,"wires":[["2378e16d.9017fe","c35dd413.8198e8"]]},{"id":"9e29cc6f.63a78","type":"function","z":"68cc7b04.d18404","name":"Split Data -  Air Conditioner Heat Cooling","func":"// seperate string in arrays and find how many elements in array\nvar msgdata = msg.payload.split(\" \");\nvar datalength = msgdata.length;\n\nfor (i = 0; i < msgdata.length; i++) // look for the word one\n    { \n    if (msgdata[i] == \"Aircon\")\n        {\n        var Aircon_index = i;\n        var relay_number = 1;\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word on\n    { \n    if (msgdata[i] == \"on\")\n        {\n        var on_index = i;\n        var aircon_pwr = 'on';\n        node.send ({payload:[\"Aircon on\"]});\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word off\n    { \n    if (msgdata[i] == \"off\")\n        {\n        var off_index = i;\n        var aircon_pwr = 'off';\n        node.send ({payload:[\"Aircon off\"]});\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word heat\n    { \n    if (msgdata[i] == \"heat\")\n        {\n        var heat_index = i;\n        var aircon_mode = 'heat';\n        node.send ({payload:[\"Aircon heating\"]});\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word cool\n    { \n    if (msgdata[i] == \"cool\")\n        {\n        var heat_index = i;\n        var aircon_mode = 'cool';\n        node.send ({payload:[\"Aircon cooling\"]});\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word up\n    { \n    if (msgdata[i] == \"up\")\n        {\n        var sliding_temp_index = i;\n        var sliding_aircon_temp = 'up';\n        node.send ({payload:[\"Aircon temp up\"]});\n        }\n    }\nfor (i = 0; i < msgdata.length; i++) // look for the word down\n    { \n    if (msgdata[i] == \"down\")\n        {\n        var sliding_temp_index = i;\n        var sliding_aircon_temp = 'down';\n        node.send ({payload:[\"Aircon temp down\"]});\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word 19\n    { \n    if (msgdata[i] == \"19\")\n        {\n        var temp_index = i;\n        var aircon_temp = '19';\n        node.send ({payload:[\"Aircon temp 19\"]});\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word 20\n    { \n    if (msgdata[i] == \"20\")\n        {\n        var temp_index = i;\n        var aircon_temp = '20';\n        node.send ({payload:[\"Aircon temp 20\"]});\n        }\n    }\n\nfor (i = 0; i < msgdata.length; i++) // look for the word 21\n    { \n    if (msgdata[i] == \"21\")\n        {\n        var temp_index = i;\n        var aircon_temp = '21';\n        node.send ({payload:[\"Aircon temp 21\"]});\n        }\n    }\n\n\n\n\nreturn [null];","outputs":"1","noerr":0,"x":617.0000610351562,"y":624.000002861023,"wires":[[]]},{"id":"b957b8a5.415ba8","type":"inject","z":"68cc7b04.d18404","name":"Heating Up","topic":"","payload":"heat up","payloadType":"str","repeat":"","crontab":"","once":false,"x":172,"y":312.0000047683716,"wires":[["4fa8d74c.3e2818"]]},{"id":"52c2f1a.5c37a1","type":"inject","z":"68cc7b04.d18404","name":"Heating Down","topic":"","payload":"heat down","payloadType":"str","repeat":"","crontab":"","once":false,"x":163,"y":351.00000524520874,"wires":[["4fa8d74c.3e2818"]]},{"id":"321863c5.5a72ac","type":"inject","z":"68cc7b04.d18404","name":"Cooling Up","topic":"","payload":"cool up","payloadType":"str","repeat":"","crontab":"","once":false,"x":171,"y":388,"wires":[["4fa8d74c.3e2818"]]},{"id":"ca48a7bf.475408","type":"inject","z":"68cc7b04.d18404","name":"Cooling Down","topic":"","payload":"cool down","payloadType":"str","repeat":"","crontab":"","once":false,"x":161,"y":423.0000057220459,"wires":[["4fa8d74c.3e2818"]]},{"id":"46b9f561.f2643c","type":"inject","z":"68cc7b04.d18404","name":"Heating On","topic":"","payload":"heat on","payloadType":"str","repeat":"","crontab":"","once":false,"x":170,"y":459.0000066757202,"wires":[["4181ae0.5c79654"]]},{"id":"286d5f9e.0050d","type":"inject","z":"68cc7b04.d18404","name":"Heating Off","topic":"","payload":"heat off","payloadType":"str","repeat":"","crontab":"","once":false,"x":170,"y":496.00000762939453,"wires":[["4181ae0.5c79654"]]},{"id":"e55c5a6.54a25a8","type":"inject","z":"68cc7b04.d18404","name":"Cooling Off","topic":"","payload":"cool off","payloadType":"str","repeat":"","crontab":"","once":false,"x":164,"y":573.0000085830688,"wires":[["4181ae0.5c79654"]]},{"id":"b2b1f66c.a87c88","type":"inject","z":"68cc7b04.d18404","name":"Cooling On","topic":"","payload":"cool on","payloadType":"str","repeat":"","crontab":"","once":false,"x":169,"y":534.0000076293945,"wires":[["4181ae0.5c79654"]]},{"id":"c35dd413.8198e8","type":"link out","z":"68cc7b04.d18404","name":"Pi - AMX ","links":["8e3ed3c8.fa2e4"],"x":1055.2083587646484,"y":205.1388931274414,"wires":[]}]